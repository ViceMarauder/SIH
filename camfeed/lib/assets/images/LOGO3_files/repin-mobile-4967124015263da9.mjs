(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[37578],{517563:(e,i,n)=>{var t=n(970610),r=n(727418);function o(e,i){return i.encode?i.strict?t(e):encodeURIComponent(e):e}function s(e){return Array.isArray(e)?e.sort():"object"==typeof e?s(Object.keys(e)).sort((function(e,i){return Number(e)-Number(i)})).map((function(i){return e[i]})):e}i.extract=function(e){return e.split("?")[1]||""},i.parse=function(e,i){var n=function(e){var i;switch(e.arrayFormat){case"index":return function(e,n,t){i=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),i?(void 0===t[e]&&(t[e]={}),t[e][i[1]]=n):t[e]=n};case"bracket":return function(e,n,t){i=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),i?void 0!==t[e]?t[e]=[].concat(t[e],n):t[e]=[n]:t[e]=n};default:return function(e,i,n){void 0!==n[e]?n[e]=[].concat(n[e],i):n[e]=i}}}(i=r({arrayFormat:"none"},i)),t=Object.create(null);return"string"!=typeof e?t:(e=e.trim().replace(/^(\?|#|&)/,""))?(e.split("&").forEach((function(e){var i=e.replace(/\+/g," ").split("="),r=i.shift(),o=i.length>0?i.join("="):void 0;o=void 0===o?null:decodeURIComponent(o),n(decodeURIComponent(r),o,t)})),Object.keys(t).sort().reduce((function(e,i){var n=t[i];return Boolean(n)&&"object"==typeof n&&!Array.isArray(n)?e[i]=s(n):e[i]=n,e}),Object.create(null))):t},i.stringify=function(e,i){var n=function(e){switch(e.arrayFormat){case"index":return function(i,n,t){return null===n?[o(i,e),"[",t,"]"].join(""):[o(i,e),"[",o(t,e),"]=",o(n,e)].join("")};case"bracket":return function(i,n){return null===n?o(i,e):[o(i,e),"[]=",o(n,e)].join("")};default:return function(i,n){return null===n?o(i,e):[o(i,e),"=",o(n,e)].join("")}}}(i=r({encode:!0,strict:!0,arrayFormat:"none"},i));return e?Object.keys(e).sort().map((function(t){var r=e[t];if(void 0===r)return"";if(null===r)return o(t,i);if(Array.isArray(r)){var s=[];return r.slice().forEach((function(e){void 0!==e&&s.push(n(t,e,s.length))})),s.join("&")}return o(t,i)+"="+o(r,i)})).filter((function(e){return e.length>0})).join("&"):""}},970610:e=>{e.exports=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}},265146:(e,i,n)=>{(window.__PWS_LOADED_HANDLERS__=window.__PWS_LOADED_HANDLERS__||{})["www/pin/[id]/repin"]=function(){return n(317797).Z}},986577:(e,i,n)=>{(window.__PWS_LOADED_HANDLERS__=window.__PWS_LOADED_HANDLERS__||{})["www/pin/[id]/repin/[boardId]"]=function(){return n(317797).Z}},690447:(e,i,n)=>{(window.__PWS_LOADED_HANDLERS__=window.__PWS_LOADED_HANDLERS__||{})["www/pin/[id]/repin/[boardId]/add"]=function(){return n(317797).Z}},639673:(e,i,n)=>{(window.__PWS_LOADED_HANDLERS__=window.__PWS_LOADED_HANDLERS__||{})["www/pin/[id]/repin/x"]=function(){return n(317797).Z}},640987:(e,i,n)=>{n.d(i,{Z:()=>p});var t=n(437756),r=n(804055),o=n(124986),s=n(144977),a=n(710159),d=n(342548),c=n(883119),l=n(785893);function p(e){const i=(0,a.ZP)(),{backButtonIcon:n,name:p,onNextButtonTouch:h,onNameChange:u,selectedPinIds:g=[],useRoundedCorners:m}=e,x=g.length>0?130:64;return(0,l.jsxs)(r.default,{hasFixedHeader:!0,children:[(0,l.jsxs)(d.FixedHeader,{height:x,paddingY:3,useRoundedCorners:m,children:[(0,l.jsxs)(c.kC,{alignItems:"center",justifyContent:"between",children:[(0,l.jsx)(t.Z,{color:"darkGray",icon:n||"cancel",padding:3,size:"sm"}),(0,l.jsx)(c.X6,{accessibilityLevel:1,size:"300",children:i._("Add section","for add board section page","for add board section page")}),(0,l.jsx)(s.Z,{id:"create-section-button",children:(0,l.jsx)(c.zx,{accessibilityLabel:i._("Add","boardSectionCreate.Add.Button.Text","Add button accessibility label for board section create page"),onClick:h,disabled:""===p.trim(),color:"red",size:"lg",text:i._("Next","Next button for board section create page","Next button for board section create page")})})]}),g&&(0,l.jsx)(o.Z,{selectedPinIds:g})]}),(0,l.jsx)(c.xu,{"data-test-id":"addSectionName",paddingX:2,paddingY:3,children:(0,l.jsx)(c.nv,{id:"section-name-input",label:i._("Name","boardSectionCreate.TextField.Name.Label","TextField label to Name on BoardSectionCreate"),onChange:e=>u(e.event),size:"lg",value:p})})]})}},137660:(e,i,n)=>{n.d(i,{Z:()=>p});var t=n(40142),r=n(485750),o=n(710159),s=n(515521),a=n(180551),d=n(448906),c=n(883119),l=n(785893);function p({excludeBoardId:e,onRepinToBoard:i}){const n=(0,o.ZP)(),p=(()=>{const{userId:e}=(0,t.useSelector)((e=>e.session));return(0,s.Z)({name:"BoardPickerBoardsResource",options:{field_set_key:"board_picker",user_id:e}}),(0,t.useSelector)((e=>(0,d.Is)(e)||[]))})();return p.length>0&&(0,l.jsxs)(c.xu,{children:[(0,l.jsx)(c.xu,{marginTop:3,children:(0,l.jsx)(c.xv,{children:n._("All boards","title for board picker all boards section","title for board picker all boards section")})}),(0,l.jsx)(c.xu,{dangerouslySetInlineStyle:{__style:{marginBottom:`${a.T}px`}},paddingY:3,children:p.filter((i=>i.id!==e)).map((e=>(0,l.jsx)(r.Z,{boardId:e.id,onBoardSelected:()=>i(e)},e.id)))})]})}},743831:(e,i,n)=>{n.d(i,{Wx:()=>_,ZP:()=>j});var t=n(667294),r=n(40142),o=n(437756),s=n(899695),a=n(804055),d=n(137660),c=n(268396),l=n(124986),p=n(647136),h=n(358142),u=n(710159),g=n(180551),m=n(883119),x=n(342548),b=n(178521),f=n(855168),y=n(785893);function v(e,i,n){return e?n._("Got it! Hang tight while we move all those Pins...","Toast message for bulk pins move.","Toast message for bulk pins move."):i?n._("Saved to section!"," - "," -- "):n._("Saved to board!"," - "," -- ")}function _({onAddNewSection:e,useIconWithBackground:i}){const n=(0,u.ZP)();return(0,y.jsx)(x.FixedFooter,{height:i?g.y:g.T,alignCenter:i,children:(0,y.jsx)(s.Z,{onTouch:e,pressState:"none",children:(0,y.jsxs)(m.xu,{display:"flex",alignItems:"center",padding:i?0:1,"data-test-id":"addSectionButton",children:[i?(0,y.jsx)(m.xu,{color:"lightGray",rounding:2,dangerouslySetInlineStyle:{__style:{padding:"14px"}},children:(0,y.jsx)(m.JO,{icon:"add",color:"darkGray",size:20,accessibilityLabel:n._("Create board button","RepinSection.CreateBoard.Button","accessibility label for create board button")})}):(0,y.jsx)(m.JO,{icon:"add-circle",color:"red",size:38,accessibilityLabel:n._("Add section button"," - "," -- ")}),i?(0,y.jsx)(m.xu,{marginStart:2,children:(0,y.jsx)(m.xv,{size:"400",weight:"bold",children:n._("Add section","Add new section to Pin to","Add new section to Pin to")})}):(0,y.jsx)(m.xu,{marginStart:3,children:(0,y.jsx)(m.xv,{weight:"bold",children:n._("Add section","Add new section to Pin to","Add new section to Pin to")})})]})})})}class S extends t.PureComponent{constructor(...e){var i,n,t;super(...e),t=e=>{e.section_count?this.props.onRepinToBoardWithSections(e):this.props.repinToOtherBoard(e.id,this.props.i18n)},(n="onRepinToBoard")in(i=this)?Object.defineProperty(i,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[n]=t}render(){const{boardId:e,boardSectionId:i,orginalBoardId:n,onAddNewSection:t,repin:r,hideBoardPickerRow:s,selectedPinIds:p,isCollaborative:h}=this.props,u=n===e;return(0,y.jsxs)(a.default,{hasFixedHeader:!0,children:[(0,y.jsxs)(x.FixedHeader,{hasBorder:!0,height:130,children:[(0,y.jsxs)(m.kC,{alignItems:"center",justifyContent:"start",children:[(0,y.jsx)(m.xu,{column:2,children:(0,y.jsx)(o.Z,{})}),(0,y.jsx)(m.xu,{column:8,children:(0,y.jsx)(m.xv,{align:"center",weight:"bold",children:this.props.i18n._("Choose section","title for section selection in repin flow","title for section selection in repin flow")})}),(0,y.jsx)(m.xu,{column:2})]}),(0,y.jsx)(l.Z,{selectedPinIds:p})]}),e&&(0,y.jsx)(c.Z,{boardId:e,repin:r,originalBoardId:n,hideBoardPickerRow:u&&s,sectionId:i}),u&&(0,y.jsxs)(m.xu,{children:[!h&&(0,y.jsx)(d.Z,{excludeBoardId:e,onRepinToBoard:this.onRepinToBoard}),(0,y.jsx)(_,{onAddNewSection:t})]})]})}}const j=function(e){const{inSelectAll:i,pinIds:n,orginalBoardId:t,boardSectionId:o,onRefreshBoardSection:s,url:a}=e,{showToast:d}=(0,h.F9)(),c=(0,u.ZP)(),l=(0,f.k6)(),g=(0,r.useDispatch)();return(0,y.jsx)(S,{...e,i18n:c,repin:async(e,r,c)=>{const h=r&&r.id,u={boardId:t,sectionId:o},m={boardId:e,sectionId:h},x=i?(0,b.X_)({source:u,target:m,excludePinIds:n}):(0,b.ic)({source:u,target:m,pinIds:n});t!==e?(await g(x),l.push({pathname:a})):(await g(x),s&&await s()),d((({onHide:e})=>(0,y.jsx)(p.ZP,{text:v(i,h,c),onHide:e})))},repinToOtherBoard:async(e,r)=>{const s={boardId:t,sectionId:o},a={boardId:e,sectionId:void 0};d((({onHide:e})=>(0,y.jsx)(p.ZP,{text:v(i,void 0,r),onHide:e}))),await g(i?(0,b.X_)({source:s,target:a,excludePinIds:n}):(0,b.ic)({source:s,target:a,pinIds:n})),l.go(-2)}})}},180551:(e,i,n)=>{n.d(i,{T:()=>t,y:()=>r});const t=70,r=80},626587:(e,i,n)=>{n.d(i,{Z:()=>a});var t=n(371974),r=n(883119),o=n(183608),s=n(785893);const a=({children:e,roundedForLargeDevice:i})=>{const n="phone"!==(0,t.ZP)()&&i;return(0,o.VG)()?(0,s.jsx)(r.xu,{marginStart:-o.q3,marginEnd:-o.q3,rounding:n?6:void 0,overflow:n?"hidden":void 0,children:(0,s.jsx)(o.CK,{value:!1,children:e})}):e}},707827:(e,i,n)=>{n.d(i,{Z:()=>c});var t=n(40142),r=n(710159),o=n(819286),s=n(781228),a=n(476891),d=n(785893);function c({children:e,callbackFunction:i,modalHeader:n,nextLocation:c}){const l=(0,t.useSelector)((({session:e,users:i})=>(0,s.xT)(i[e.userId]))),p=(0,r.ZP)(),h=(0,t.useDispatch)();return(0,d.jsx)("div",{onClickCapture:e=>{l&&(i&&i(),e&&(e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation()),n||(n=(0,o.lt)(p)),h(c?(0,a.$x)(n,c):(0,a.$x)(n)))},children:e})}},485750:(e,i,n)=>{n.d(i,{Z:()=>u});var t=n(667294),r=n(40142),o=n(608548),s=n(899695),a=n(710159),d=n(166371),c=n(7093),l=n(123686),p=n(883119),h=n(785893);const u=(0,r.connect)(((e,i)=>({board:e.boards[i.boardId]})))((function({board:e,onBoardSelected:i,noArrowIcon:n,showSingleBoardRep:u}){const g=(0,a.ZP)(),m=(0,r.useSelector)((({users:e})=>e)),x=(e.collaborating_users||[]).map((e=>{var i,n;return{name:null!==(i=m[e].username)&&void 0!==i?i:"",src:"https://s.pinimg.com/images/user/default_75.png"===m[e].image_medium_url?"":null!==(n=m[e].image_medium_url)&&void 0!==n?n:""}}));let b="";const f=x.slice(0,3).map((e=>e.name));switch(x.length){case 3:b=(0,l.Wc)(`${g._("{{ first }}, {{ second }}, and {{ last }}","CollaboratorsFacePile.AvatarGroup.accessibilityLabel.usernames.ThreeAvatars","List of three usernames")}`,{first:`${f[0]}`,second:`${f[1]}`,last:`${f[2]}`});break;case 2:b=(0,l.Wc)(`${g._("{{ first }} and {{ second }}","CollaboratorsFacePile.AvatarGroup.accessibilityLabel.usernames.TwoAvatars","List of two usernames.")}`,{first:`${f[0]}`,second:`${f[1]}`});break;default:b=f.join(", ")}const y=x.length>3?(0,l.Wc)(g.ngettext("Collaborators: {{ userNames }} and {{ leftCount }} more.","Collaborators: {{ userNames }} and {{ leftCount }} more.",x.length-3,"CollaboratorsFacePile.AvatarGroup.accessibilityLabel.aboveThree","Accessibility label that lists the names of collaborators and a final count of non-displayed avatars"),{userNames:b,leftCount:""+(x.length-3)}):(0,l.Wc)(`${g._("Collaborators: {{ userNames }}.","CollaboratorsFacePile.AvatarGroup.accessibilityLabel.notAboveThree","Accessibility label that lists the names of collaborators")}`,{userNames:b}),v=new p.Ry(0),_=(0,h.jsx)(t.Fragment,{children:(0,h.jsxs)(p.xu,{"data-test-id":"board-picker-row",display:"flex",alignItems:"center",rounding:2,column:12,marginBottom:u?4:0,children:[(0,h.jsx)(p.xu,{paddingY:u?0:2,children:u?(0,h.jsx)(p.xu,{height:48,overflow:"hidden",width:48,children:(0,h.jsx)(p.zd,{height:"100%",rounding:2,width:"100%",children:(0,h.jsx)(p.Ee,{alt:"",color:"lightGray",fit:"cover",naturalHeight:1,naturalWidth:1,src:e.image_cover_url||""})})}):(0,h.jsx)(p.xu,{height:60,overflow:"hidden",rounding:4,width:60,children:(0,h.jsx)(o.Z,{boardId:e.id,type:"thumbnail",fullSize:!0})})}),(0,h.jsxs)(p.kC,{alignItems:"center",flex:"grow",justifyContent:"between",children:[(0,h.jsx)(p.xu,{direction:"column",display:"flex",justifyContent:"center",marginStart:u?2:4,width:"100%",overflow:u?"hidden":"auto",children:(0,h.jsx)(p.xv,{size:"400",weight:"bold",lineClamp:u?1:void 0,children:e.name})}),(0,h.jsxs)(p.kC,{alignItems:u?"center":"start",justifyContent:"start",children:["secret"===e.privacy&&(0,h.jsx)(p.xu,{marginStart:u?3:1,children:(0,h.jsx)(p.JO,{color:u?"darkGray":"gray",icon:"lock",accessibilityLabel:g._("secret board icon"," - "," -- ")})}),e.is_collaborative&&u&&x.length>0?(0,h.jsx)(p.xu,{zIndex:v,children:(0,h.jsx)(p.HE,{accessibilityLabel:c.U+y,collaborators:x,size:1===x.length?"sm":"xs"})}):e.is_collaborative&&(0,h.jsx)(p.xu,{marginStart:1,children:(0,h.jsx)(p.JO,{icon:"people",accessibilityLabel:g._("group board icon"," - "," -- ")})}),!n&&!!e.section_count&&(0,h.jsx)(p.xu,{"data-test-id":"boardSectionPicker",marginStart:u?3:0,children:(0,h.jsx)(p.JO,{color:u?"darkGray":"gray",icon:"arrow-forward",accessibilityLabel:g._("board section board picker icon"," - "," -- ")})})]})]})]})}),S=e.section_count,j=!!S&&S>0,w=(0,d.Z)();return(0,h.jsx)(s.Z,{rounding:2,onTouch:w({fn:()=>i(j)}),pressState:"none",children:_})}))},268396:(e,i,n)=>{n.d(i,{Z:()=>u});var t=n(40142),r=n(485750),o=n(899695),s=n(883119),a=n(785893);function d({onSectionSelected:e,sectionId:i,showSectionRep:n}){var r;const d=(0,t.useSelector)((({boardsections:e})=>e[i])),c=(0,t.useSelector)((({pins:e})=>{var i;return d&&d.preview_pins&&(null===(i=e[d.preview_pins[0]])||void 0===i?void 0:i.image_medium_url)}));return(0,a.jsx)(o.Z,{rounding:2,onTouch:e,pressState:"none",children:(0,a.jsxs)(s.xu,{"data-test-id":"sectionPickerRow",display:"flex",alignItems:"center",rounding:2,column:12,marginBottom:n?4:0,children:[n&&(0,a.jsx)(s.xu,{height:48,width:51,children:(0,a.jsx)(s.zd,{height:"100%",rounding:2,width:"100%",children:(0,a.jsx)(s.Ee,{alt:null!==(r=d.title)&&void 0!==r?r:"",color:"lightGray",fit:"cover",naturalHeight:1,naturalWidth:1,src:c||""})})}),!n&&(0,a.jsx)(s.xu,{column:1,paddingY:2}),(0,a.jsx)(s.xu,{column:11,display:"flex",flex:"grow",justifyContent:"between",paddingY:2,children:n?(0,a.jsx)(s.xu,{overflow:"hidden",width:"100%",marginStart:2,children:(0,a.jsx)(s.xv,{size:"400",lineClamp:1,weight:"bold",children:d.title})}):(0,a.jsx)(s.xu,{marginStart:2,children:(0,a.jsx)(s.xv,{weight:"bold",children:d.title})})})]})})}var c=n(515521),l=n(448906),p=n(855168),h=n(710159);function u({boardId:e,originalBoardId:i,sectionId:n,repin:o,hideBoardPickerRow:u,showSectionRep:g}){const m=(0,h.ZP)(),{isFetching:x,boardSections:b,filteredBoardSections:f}=((e,i)=>{const{isFetching:n}=(0,c.Z)({name:"BoardSectionsRepinResource",options:{board_id:e}}),r=(0,t.useSelector)((i=>((0,l.T_)(i,{boardId:e})||[]).reduce(((e,i)=>{if("boardsection"===i.type){const n={type:"boardsection",id:i.id};e.push(n)}return e}),[]))),o=(0,t.useSelector)((n=>r.map((e=>e.id)).reduce(((t,r)=>{const o=n.boardsections[null!=r?r:""];return r!==i&&o&&t.push({board:{id:e},id:o.id,title:o.title,type:"boardsection",slug:o.slug}),t}),[])));return{isFetching:n,boardSections:r,filteredBoardSections:o}})(e,n),y=(0,p.k6)(),v=(0,t.useSelector)((({boards:e})=>e[i||""]));return(0,a.jsxs)(s.xu,{children:[b.length>0&&(0,a.jsxs)(s.xu,{paddingY:g?0:3,children:[g&&(0,a.jsx)(s.xu,{paddingY:2,children:(0,a.jsx)(s.xu,{marginBottom:2,children:(0,a.jsx)(s.xv,{children:m._("Board","RepinFlow.SectionPickerList.Board","Section picker board title")})})}),!u&&(0,a.jsx)(r.Z,{boardId:e,noArrowIcon:!0,onBoardSelected:()=>o(e,void 0,m),showSingleBoardRep:g},e),g&&(0,a.jsx)(s.xu,{paddingY:4,children:(0,a.jsx)(s.xv,{children:m._("Section","RepinFlow.SectionPickerList.Section","Section picker all sections title")})}),f.map((n=>{var t;return(0,a.jsx)(d,{onSectionSelected:()=>{o(e,n,m),i&&y.push(v.url)},sectionId:null!==(t=n.id)&&void 0!==t?t:"",showSectionRep:g},n.id)}))]}),(0,a.jsx)(s.$j,{accessibilityLabel:m._("Loading board section for repin flow"," - "," -- "),show:x})]})}},397512:(e,i,n)=>{n.d(i,{a:()=>r,k:()=>o});var t=n(138365);const r=e=>({type:t.cZ,payload:e}),o=e=>({type:t.U1,payload:e})},317797:(e,i,n)=>{n.d(i,{Z:()=>ke});var t=n(667294),r=n(40142),o=n(308040),s=n(437756),a=n(710159),d=n(880881),c=n(883119),l=n(785893);const p="cubic-bezier(0.66, 0.025, 0.33, 0.975)",h=(0,d.qe)(((e,i,n,t,r)=>{let o=e,s=i,a=0,d=0,c="";const l=Math.floor(i/3);if("shrinkToPin"===n&&(a="24px",d=1,o=Math.floor(3*l/2),s=l),"pinToGrid"===n&&t&&r){const e=t.getBoundingClientRect(),i=r.getBoundingClientRect();c=`translate(${i.x+i.width/2-(e.x+e.width/2)}px, ${i.y+i.height/2-(e.y+e.height/2)}px)`,a="24px 0px 0px 24px",d=1,o=l,s=l}return{borderRadius:a,height:o,opacity:d,overflow:"hidden",width:s,WebkitTransformOrigin:"center center",transformOrigin:"center center",WebkitTransform:c,transform:c,WebkitTransition:`all .42s ${p}`,transition:`all .42s ${p}`}})),u=(0,d.qe)((e=>({opacity:e?1:0,WebkitTransition:`opacity .42s ${p}`,transition:`opacity .42s ${p}`}))),g=(0,d.qe)((e=>({opacity:e?0:1,WebkitTransition:`all .25s ${p}`,transition:`all .25s ${p}`,zIndex:3})));function m({completeExperience:e,pinDominantColor:i,pinImageHeight:n,pinImageWidth:r,pinImageUrl:o}){const s=(0,a.ZP)(),[d,p]=(0,t.useState)("visible"),[m,x]=(0,t.useState)("none");let b,f,y,v;const _=window.innerWidth,S=_*(n/r),j=Math.floor(_/3),w=Math.floor(_/6);(0,t.useEffect)((()=>{o&&"none"===m&&(b=setTimeout((()=>{x("shrinkToPin")}),85)),o&&"shrinkToPin"===m&&(f=setTimeout((()=>{x("pinToGrid")}),2e3)),"pinToGrid"===m&&"visible"===d&&(y=setTimeout((()=>{p("hidden")}),2e3)),"hidden"===d&&(v=setTimeout((()=>{p("none"),e()}),300))})),(0,t.useEffect)((()=>()=>{clearTimeout(b),clearTimeout(f),clearTimeout(y),clearTimeout(v)}),[]);const P=(0,t.useRef)(null),I=(0,t.useRef)(null);return(0,l.jsxs)(c.xu,{alignItems:"center",bottom:!0,color:"white",dangerouslySetInlineStyle:{__style:g("hidden"===d)},direction:"column",display:"none"===d?"none":"flex",justifyContent:"center",left:!0,position:"fixed",right:!0,top:!0,children:[(0,l.jsxs)(c.xu,{height:_/2,width:"100%",marginBottom:8,display:"flex",justifyContent:"center",alignItems:"center",position:"relative",children:[(0,l.jsx)(c.xu,{position:"absolute",dangerouslySetInlineStyle:{__style:u("pinToGrid"===m)},children:(0,l.jsx)(c.zd,{rounding:6,width:j+w+1,height:j,children:(0,l.jsxs)(c.kC,{alignItems:"stretch",justifyContent:"between",children:[(0,l.jsx)(c.xu,{width:j,height:j,color:"transparent",ref:I}),(0,l.jsxs)(c.kC,{alignItems:"stretch",direction:"column",justifyContent:"between",children:[(0,l.jsx)(c.xu,{width:w,height:w,color:"lightGray"}),(0,l.jsx)(c.xu,{width:w,height:w,color:"lightGray"})]})]})})}),(0,l.jsx)(c.xu,{ref:P,position:"absolute",dangerouslySetInlineStyle:{__style:h(S,_,m,P.current,I.current)},children:(0,l.jsx)(c.Ee,{alt:s._("Pin image","Pin image on repin page","Pin image on repin page"),src:o,fit:"cover",naturalHeight:n,naturalWidth:r,color:i})})]}),(0,l.jsx)(c.xu,{marginTop:8,marginBottom:8,paddingX:12,children:(0,l.jsx)(c.X6,{align:"center",size:"md",children:s._("Keep your ideas organized by creating a board","boardPicker.edu.heading","board create education shown before user create their first board")})})]})}var x=n(109770),b=n(414021);function f(e,i){return!(!e||!e.placement_id||e.experience_id!==i)}var y=n(916389),v=n(804055),_=n(517563),S=n(640987),j=n(647136),w=n(178521),P=n(52968),I=n(979596),B=n(358142),T=n(855168);function k(e,i,n){return i in e?Object.defineProperty(e,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[i]=n,e}class C extends t.PureComponent{constructor(...e){super(...e),k(this,"state",{name:""}),k(this,"onNextButtonTouch",(()=>{const{name:e}=this.state,{createSectionAndRepin:i,i18n:n}=this.props;i(e,n)})),k(this,"onNameChange",(e=>{this.setState({name:e.target.value})}))}render(){const{pin:e,useRoundedCorners:i}=this.props,{name:n}=this.state;return(0,l.jsx)(S.Z,{backButtonIcon:"arrow-back",name:n,onNameChange:this.onNameChange,onNextButtonTouch:this.onNextButtonTouch,selectedPinIds:[e.id],useRoundedCorners:i})}}function A(e){const{boardId:i,isEditingPin:n,onSuccess:t,pin:o,pinBoardId:s,pinSectionId:d,trackingParams:c}=e,p=(0,r.useDispatch)(),h=(0,T.k6)(),u=(0,a.ZP)(),{showToast:g}=(0,B.F9)();return(0,l.jsx)(C,{...e,i18n:u,createSectionAndRepin:e=>{const r=e=>g((({onHide:i})=>(0,l.jsx)(j.ZP,{text:e.message||u._("Sorry! Something went wrong on our end.","error creating board section","error creating board section"),variant:"error",onHide:i})));p((0,w.Nv)(i,[],e)).then((e=>{g((({onHide:e})=>(0,l.jsx)(j.ZP,{text:u._("Section added!"," - "," -- "),onHide:e})));const a=e.resource_response.data;p((0,I.wh)({i18n:u,pinId:o.id,boardId:i,onSuccess:n?void 0:t,onUndo:(e,i,n,t)=>(0,P.a)({dispatch:p,i18n:u,showToast:g,newPinId:i,sourcePinId:e,boardId:n,boardSectionId:t}),showToast:g,section:a,trackingParams:{clientTrackingParams:c,pinnedToBoardId:o.pinned_to_board?o.pinned_to_board.id:""}})).then((()=>{o&&s&&p((0,I.q$)(o.id,s,d)).then((()=>{var e;return o.pinned_to_board?h.replace(null!==(e=o.pinned_to_board.url)&&void 0!==e?e:""):void 0}))})).catch(r)})).catch(r)},showToast:g})}var F=n(485750);function R({handleSelected:e}){const i=(0,a.ZP)();return(0,l.jsx)(c.iP,{rounding:2,onTap:()=>{e(!1,null)},children:(0,l.jsxs)(c.xu,{"data-test-id":"board-picker-row",display:"flex",alignItems:"center",rounding:2,column:12,marginBottom:4,children:[(0,l.jsx)(c.xu,{color:"lightGray",display:"flex",flex:"none",justifyContent:"center",alignItems:"center",height:48,rounding:2,width:48,children:(0,l.jsx)(c.JO,{accessibilityLabel:i._("Profile","save.ProfilePickerRow.IconAccessibilityLabel","Accessibility label for icon on option to save Pin to profile"),color:"darkGray",icon:"history",size:22})}),(0,l.jsx)(c.xu,{display:"flex",direction:"column",justifyContent:"center",marginStart:2,width:"100%",overflow:"hidden",children:(0,l.jsx)(c.X6,{size:"sm",lineClamp:1,children:i._("Profile","save.ProfilePickerRow","Option to save Pin to profile")})})]})})}var E=n(166371),Z=n(248924),D=n(819286),L=n(397512),N=n(708206);const O=(0,N.compose)(Z.Z,(0,r.connect)(null,((e,{history:i,pinDescription:n,pinBoardId:t,pin:r,pinSectionId:o,showRepinConfirmation:s,showToast:a,trackingParams:d,dismissFlyout:c})=>({repin:(n,t)=>(c(),e((0,I.wh)({i18n:t,pinId:r.id,boardId:n,onSuccess:i.goBack,onUndo:(i,n,o,s)=>(0,P.a)({dispatch:e,i18n:t,showToast:a,newPinId:n,sourcePinId:r.id,boardId:o,boardSectionId:s}),showRepinConfirmation:s,trackingParams:d}))),dispatchOneTapSave:i=>e((0,L.a)({...i})),dispatchUnsavePin:()=>e((0,I.q$)(r.id,t||"",o))}))))((function({boards:e,boardsShortlist:i,dispatchOneTapSave:n,dispatchUnsavePin:r,history:o,isEditingPin:s,isFromToast:d,onSelect:p,pin:h,repin:u,saveToProfileEnabled:g,showToast:m}){const x=(0,a.ZP)(),b=(0,E.Z)(),f=o.location.state&&o.location.state.isOneTapSave,y=b({fn:async(e,i)=>{if(e&&i)p(i);else try{const e=await u(null==i?void 0:i.id,x);if(f&&e&&n({boardId:null==i?void 0:i.id,localPinId:e.id,pinId:h.id}),s){var t;await r();const e=null===(t=h.pinned_to_board)||void 0===t?void 0:t.url;if(d)o.goBack();else if(h.section){var a;const i=`${null!=e?e:""}${null!==(a=h.section.slug)&&void 0!==a?a:""}/`;o.replace(null!=i?i:"")}else h.pinned_to_board&&o.replace(null!=e?e:"")}}catch(c){m((({onHide:e})=>(0,l.jsx)(j.ZP,{variant:"error",text:c.message||x._("Sorry! Something went wrong on our end.","error during repin","error during repin"),onHide:e})))}},modalHeader:(0,D.Bx)(x)});let v=[];return v=i?e.filter((e=>i.some((i=>e.id===i.id)))):e.slice(0,3),(0,l.jsxs)(t.Fragment,{children:[(0,l.jsxs)(c.xu,{paddingY:4,children:[g&&(0,l.jsx)(R,{handleSelected:y}),v.map((e=>(0,l.jsx)(F.Z,{boardId:e.id,onBoardSelected:i=>y(i,e),showSingleBoardRep:!0},e.id)))]}),(0,l.jsxs)(c.xu,{children:[(0,l.jsx)(c.xu,{marginBottom:4,children:(0,l.jsx)(c.xv,{children:x._("All boards","RepinFlow.BoardPickerList.AllBoards","Board picker list all boards title")})}),e.map((e=>(0,l.jsx)(F.Z,{boardId:e.id,onBoardSelected:i=>y(i,e),showSingleBoardRep:!0},e.id)))]})]})})),$=()=>(0,l.jsx)(c.xu,{color:"lightGray",display:"inlineBlock",height:60,minWidth:60,overflow:"hidden",position:"relative",rounding:4,children:(0,l.jsxs)(t.Fragment,{children:[(0,l.jsx)(c.xu,{color:"white",dangerouslySetInlineStyle:{__style:{left:"50%"}},height:"100%",position:"absolute",width:1}),(0,l.jsx)(c.xu,{color:"white",dangerouslySetInlineStyle:{__style:{top:"50%"}},height:1,width:"50%",position:"absolute",right:!0})]})});var H=n(899695),W=n(644748),z=n(7853),U=n(745469),Y=n(477783);const G=(0,N.compose)(Z.Z,(0,r.connect)((({pins:e,session:i,users:n},{pinId:t})=>({pin:e[t]})),((e,{pinBoardId:i,pinId:n,pinSectionId:t,trackingParams:{clientTrackingParams:r}})=>({createBoard:i=>e((0,W.aX)(i,"public",n,r)),dispatchUnsavePin:()=>e((0,I.q$)(n,i||"",t))}))))((({createBoard:e,dispatchUnsavePin:i,isEditingPin:n,isFirstBoard:t,history:r,onFirstBoardCreate:o,pin:s,pinId:d,pinViewParameter:p,showRepinConfirmation:h,titleSuggestions:u,trackingParams:{clientTrackingParams:g}})=>{const m=(0,a.ZP)(),f=(0,E.Z)(),y=t=>{e(t).then((e=>(n?(async()=>{var e;await i();const n=null===(e=s.pinned_to_board)||void 0===e?void 0:e.url;if(s.section){var t;const e=`${null!=n?n:""}${null!==(t=s.section.slug)&&void 0!==t?t:""}/`;r.replace(null!=e?e:"")}else r.replace(null!=n?n:"")})():r.goBack(),e))).then((e=>{const{data:i}=e.resource_response,{url:n,id:r}=i,{href:o,text:a}=(0,z.Io)(n,t,m),{duration:c,text:u,thumbnail:f}=(0,U.qV)({boardId:r});h((({onHide:e})=>(0,l.jsx)(x.Z,{duration:c,href:o,onHide:e,text:u||a,thumbnail:f}))),(0,Y.j)({event_type:5,view_type:3,component:7,view_parameter:p,object_id_str:d,clientTrackingParams:(0,b.Z)(g,s.tracking_params),aux_data:{board_id:r,destination_board_id:r}})}))},v=f({fn:(e,i,n)=>{(({allSuggestions:e,handleCreateBoard:i,index:n,isFBC:t,pinViewParameter:r})=>{i(),(0,Y.So)({aux_data:{board_title_list:JSON.stringify(e),is_fbc:t.toString(),selected_board_title_index:n},component:7,element:23,view_parameter:r,view_type:3})})({allSuggestions:n,handleCreateBoard:()=>t?o(i):y(i),index:e,isFBC:t,pinViewParameter:p})},modalHeader:(0,D.Bb)(m)});return u?u.map(((e,i,n)=>(0,l.jsx)(c.xu,{children:(0,l.jsx)(H.Z,{onTouch:()=>v(i,e,n),pressState:"none",rounding:2,children:(0,l.jsxs)(c.xu,{display:"flex",alignItems:"center",paddingY:2,rounding:2,children:[(0,l.jsx)($,{}),(0,l.jsx)(c.xu,{column:10,marginStart:3,children:(0,l.jsx)(c.X6,{size:"sm",children:e})})]})},i)},i))):null}));var M=n(626587),q=n(515521),X=n(225748);function V({allBoards:e,saveToProfileEnabled:i,boardsShortlist:n,dismissFlyout:r,history:o,isEditingPin:s,isFromToast:d,onSelect:p,pin:h,pinBoardId:u,pinDescription:g,pinSectionId:m,trackingParams:x}){const b=(0,a.ZP)();return(0,l.jsxs)(t.Fragment,{children:[(0,l.jsx)(c.xu,{marginTop:2,children:(0,l.jsx)(c.xv,{children:b._("Top choices","boardPicker.header.topChoices","Header of a list of user's boards")})}),(0,l.jsx)(O,{boards:e,boardsShortlist:n,dismissFlyout:r,history:o,isEditingPin:s,isFromToast:d,onSelect:p,pin:h,pinBoardId:u,pinDescription:g,pinSectionId:m,saveToProfileEnabled:i,trackingParams:x})]})}function J({allBoards:e,boardsShortlist:i,saveToProfileEnabled:n,dismissFlyout:t,history:r,isEditingPin:o,isFirstRepinExperience:s,isFromToast:d,onFirstBoardCreate:p,onSelect:h,pin:u,pinBoardId:g,pinDescription:m,pinSectionId:x,trackingParams:b,titleSuggestions:f}){const y=(0,a.ZP)(),v=s||0===e.length&&!n,_=()=>(0,l.jsx)(G,{history:r,isEditingPin:o,isFirstBoard:v,onFirstBoardCreate:p,pinBoardId:g,pinId:u.id,pinSectionId:x,pinViewParameter:(0,X.A)(u),titleSuggestions:f,trackingParams:b});return v?(0,l.jsxs)(c.xu,{paddingX:1,children:[(0,l.jsx)(c.xu,{marginBottom:4,children:(0,l.jsx)(c.xv,{children:y._("Tap to create your first board","CTA for board title suggestions","Explain to user that tapping on suggestion creates a board")})}),_()]}):(0,l.jsxs)(c.xu,{marginBottom:4,children:[(0,l.jsx)(c.xu,{marginBottom:4,children:(0,l.jsx)(c.xv,{children:y._("Top choices","boardPicker.header.topChoices","Header of a list of user's boards")})}),(0,l.jsx)(O,{boards:e,boardsShortlist:i,saveToProfileEnabled:n,dismissFlyout:t,history:r,onSelect:h,pinDescription:m,pin:u,trackingParams:b,isEditingPin:o,isFromToast:d,pinBoardId:g,pinSectionId:x}),f?(0,l.jsxs)(c.xu,{children:[(0,l.jsx)(c.xu,{paddingY:1,children:(0,l.jsx)(M.Z,{children:(0,l.jsx)(c.iz,{})})}),(0,l.jsx)(c.xu,{paddingY:4,children:(0,l.jsx)(c.xv,{children:y._("Or tap to create a new board","boardPicker.suggestedBoardName.title","Title for repin page suggested board name section")})}),_()]}):(0,l.jsx)(c.xu,{paddingY:6,children:(0,l.jsx)(c.$j,{accessibilityLabel:y._("Loading repin page content"," - "," -- "),show:!0})})]})}function K(e){const i=(0,a.ZP)(),{allBoards:n,boardsShortlist:t,saveToProfileEnabled:o,dismissFlyout:s,history:d,isEditingPin:p,isFetchingBoards:h,isFirstRepinExperience:u,isFromToast:g,onFirstBoardCreate:m,onSelect:x,location:b,pin:f,pinBoardId:y,pinDescription:v,pinSectionId:_}=e,S={clientTrackingParams:b.state?b.state.trackingParams:"",pinnedToBoardId:f.pinned_to_board?f.pinned_to_board.id:""},j=(w=f.id,(0,q.Z)({name:"BoardTitleSuggestionsResource",options:{pin_id:w}}),(0,r.useSelector)((({pins:e})=>e[w]?e[w].boardTitleSuggestions:[])));var w;return n.length>0||!h?n.length>=10?(0,l.jsx)(V,{allBoards:n,boardsShortlist:t,dismissFlyout:s,history:d,isEditingPin:p,isFromToast:g,onSelect:x,pin:f,pinBoardId:y,pinDescription:v,pinSectionId:_,saveToProfileEnabled:o,trackingParams:S}):(0,l.jsx)(J,{allBoards:n,boardsShortlist:t,dismissFlyout:s,history:d,isEditingPin:p,isFirstRepinExperience:u,isFromToast:g,onFirstBoardCreate:m,onSelect:x,pin:f,pinBoardId:y,pinDescription:v,pinSectionId:_,saveToProfileEnabled:o,titleSuggestions:j,trackingParams:S}):(0,l.jsx)(c.xu,{paddingY:2,children:(0,l.jsx)(c.$j,{accessibilityLabel:i._("Loading repin page content"," - "," -- "),show:!0})})}var Q=n(741012),ee=n(342548);function ie({isEditingPin:e,isFirstBoardCreateActive:i,pin:n,pinBoardId:t,pinDescription:r,pinSectionId:o,trackingParams:s,onTouch:d,useIconWithBackground:p}){const h=(0,a.ZP)(),u=(0,Q.Z)({href:{pathname:`/board/create/${n.id}/`,state:{isFirstBoardCreateActive:i,pinnedToBoardId:n.pinned_to_board?n.pinned_to_board.id:"",pinDescription:r,trackingParams:s,isEditingPin:e,pinBoardId:t,pinSectionId:o}}});return(0,l.jsx)(ee.FixedFooter,{height:p?void 0:70,hasTopShadow:p,children:(0,l.jsx)(c.iP,{onTap:({event:e})=>{null==d||d(),u({event:e})},children:(0,l.jsxs)(c.xu,{"data-test-id":"repinCreateBoardButton",display:"flex",alignItems:"center",paddingY:p?0:1,paddingX:p?1:0,children:[p?(0,l.jsx)(c.xu,{color:"lightGray",rounding:2,dangerouslySetInlineStyle:{__style:{padding:"14px"}},children:(0,l.jsx)(c.JO,{icon:"add",color:"darkGray",size:20,accessibilityLabel:h._("Create board button"," - "," -- ")})}):(0,l.jsx)(c.JO,{icon:"add-circle",color:"red",size:38,accessibilityLabel:h._("Create board button"," - "," -- ")}),(0,l.jsx)(c.xu,{marginStart:p?2:3,children:(0,l.jsx)(c.xv,{weight:"bold",children:h._("Create board","Create new board to Pin to","Create new board to Pin to")})})]})})})}var ne=n(268396);function te({boardId:e,history:i,location:{search:n},showSectionRep:t,pin:o,onSuccess:s,trackingParams:d,dismissFlyout:c}){const p=(0,r.useDispatch)(),h=(0,a.ZP)(),{showToast:u}=(0,B.F9)(),{isEditingPin:g}=_.parse(n),m=i=>{c();const t=(0,b.Z)(d,o.tracking_params),{isEditingPin:r}=_.parse(n);p((0,I.wh)({i18n:h,pinId:o.id,boardId:e,onSuccess:r?void 0:s,onUndo:(e,i,n,t)=>(0,P.a)({dispatch:p,i18n:h,showToast:u,newPinId:i,sourcePinId:e,boardId:n,boardSectionId:t}),showToast:u,section:i,trackingParams:{clientTrackingParams:t,pinnedToBoardId:o.pinned_to_board?o.pinned_to_board.id:""}})).then((()=>{var e;i&&p((0,w.A4)(null!==(e=i.id)&&void 0!==e?e:""))}))};return(0,l.jsx)(ne.Z,{boardId:e,repin:async(e,t)=>{var r;(await m(t),g)&&(await(()=>{const{pinBoardId:e,pinSectionId:i}=_.parse(n);return p((0,I.q$)(o.id,e,i))})(),null!==(r=o.pinned_to_board)&&void 0!==r&&r.url&&i.replace(o.pinned_to_board.url))},showSectionRep:t})}var re=n(144977),oe=n(673599),se=n(379771),ae=n(707827),de=n(743831),ce=n(747678),le=n(448906),pe=n(123686);function he(e,i,n){return i in e?Object.defineProperty(e,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[i]=n,e}const ue=["#0074e8","#0FA573","#B469EB","#F13535","#E2780D"],ge=(e,i)=>Math.random()*((e||1)-(i||0))+(i||0),me=e=>e*(Math.PI/180);class xe extends t.PureComponent{constructor(...e){super(...e),he(this,"animationTimer",null),he(this,"canvasRemovalTimer",null),he(this,"childrenContainerRef",(0,t.createRef)()),he(this,"containerRef",(0,t.createRef)()),he(this,"buildCanvas",(()=>{if(!this.containerRef.current)return null;const e=window.innerWidth,{height:i,top:n}=this.containerRef.current.getBoundingClientRect(),t=document.createElement("canvas");return t.style.position="absolute",t.style.left="0px",t.style.top=n-(e-i)/2+"px",t.style.pointerEvents="none",t.style.width=`${e}px`,t.style.height=`${e}px`,t.width=e,t.height=e,t})),he(this,"explode",(()=>{const e=this.buildCanvas();if(!e)return;const i=this.containerRef.current,n=this.childrenContainerRef.current,t=e.getContext("2d");null==i||i.insertBefore(e,n);const r=Array.from(Array(120)).map((()=>({x:e.width/2,y:e.height/2,radius:Math.round(ge(10,30)),color:ue[Math.floor(Math.random()*ue.length)],degree:Number(ge(0,360).toFixed(1)),speed:Math.round(ge(0,25)),friction:.9,opacity:Number(ge(0,.5).toFixed(1)),yVel:0,gravity:.04}))),o=(e,i,n,t)=>{window.requestAnimationFrame((()=>o(e,i,n,t))),i.clearRect(0,0,n,t),e.forEach(((e,n)=>{e.x+=e.speed*Math.cos(me(e.degree)),e.y+=e.speed*Math.sin(me(e.degree)),e.opacity-=.01,e.speed*=e.friction,e.radius*=e.friction,e.yVel+=e.gravity,e.y+=e.yVel,e.opacity<0||e.radius<0||(i.beginPath(),i.globalAlpha=e.opacity,i.fillStyle=e.color,i.arc(e.x,e.y,e.radius,0,2*Math.PI,!1),i.fill())}))};o(r,t,e.width,e.height),this.canvasRemovalTimer=setTimeout((()=>{null==i||i.removeChild(e)}),(this.props.delay||0)+1e3)}))}componentDidUpdate(e){const{delay:i,startAnimation:n}=this.props,{startAnimation:t}=e;n&&t!==n&&(this.animationTimer=setTimeout(this.explode,i))}componentWillUnmount(){this.animationTimer&&clearTimeout(this.animationTimer),this.canvasRemovalTimer&&clearTimeout(this.canvasRemovalTimer)}render(){return(0,l.jsx)(c.xu,{ref:this.containerRef,children:(0,l.jsx)(c.xu,{ref:this.childrenContainerRef,children:this.props.children})})}}he(xe,"defaultProps",{delay:0});const be=xe;function fe(e,i,n){return i in e?Object.defineProperty(e,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[i]=n,e}const ye=(e,i,n)=>{var t,r;const o=[],s=null===(t=i.current)||void 0===t?void 0:t.getBoundingClientRect(),a=null===(r=n.current)||void 0===r?void 0:r.getBoundingClientRect();if(s&&a){const e={x:a.left-s.left,y:a.top-s.top},i={x:a.width/s.width,y:a.height/s.height};o.push(`translate(${e.x}px, ${e.y}px)`),o.push(`scale(${i.x}, ${i.y})`)}return{WebkitTransformOrigin:"left top",transformOrigin:"left top",WebkitTransform:e?o.join(" "):"none",transform:e?o.join(" "):"none",WebkitTransition:"all .5s ease-in-out",transition:"all .5s ease-in-out",borderRadius:e?"8px 0px 0px 0px":"8px",overflow:"hidden",marginBottom:24}},ve=e=>({pointerEvents:"none",opacity:e?1:0,WebkitTransition:"opacity .4s ease-in-out",transition:"opacity .4s ease-in-out",zIndex:2}),_e=e=>({opacity:e?1:0,WebkitTransform:e?"translateY(0)":"translateY(20%)",transform:e?"translateY(0)":"translateY(20%)",WebkitTransition:"all .25s ease-in-out .5s",transition:"all .25s ease-in-out .5s",textAlign:"center",marginTop:"50px"});class Se extends t.PureComponent{constructor(...e){super(...e),fe(this,"state",{startAnimation:!1}),fe(this,"dismissTimer",null),fe(this,"pinRef",(0,t.createRef)()),fe(this,"pinDestinationRef",(0,t.createRef)()),fe(this,"handleAnimationAndCompletion",(()=>{const{onComplete:e,savePin:i,selectedBoardName:n}=this.props;if(!n)return;const t=this.startAnimation(),r=i(n);Promise.all([t,r]).then((i=>{const[,t]=i;e(t,n)})).catch((e=>{t.then((()=>{e&&e.onError&&e.onError()}))}))})),fe(this,"startAnimation",(()=>new Promise((e=>{this.setState({startAnimation:!0},(()=>{this.dismissTimer=setTimeout((()=>{e()}),2600)}))}))))}componentWillUnmount(){this.dismissTimer&&clearTimeout(this.dismissTimer)}componentDidUpdate(){const{selectedBoardName:e}=this.props,{startAnimation:i}=this.state;e&&!i&&this.handleAnimationAndCompletion()}render(){const{pinDominantColor:e,pinImageUrl:i,selectedBoardName:n}=this.props,{startAnimation:r}=this.state;return(0,l.jsxs)(t.Fragment,{children:[(0,l.jsx)(c.Le,{top:ee.DEFAULT_HEIGHT,zIndex:new c.Ry(3),children:(0,l.jsx)(c.xu,{display:"flex",color:r?"transparent":"white",justifyContent:"center",alignItems:"center",children:(0,l.jsx)(c.xu,{ref:this.pinRef,height:84,width:84,position:"relative",dangerouslySetInlineStyle:{__style:ye(r,this.pinRef,this.pinDestinationRef)},children:(0,l.jsx)(c.Ee,{alt:this.props.i18n._("Pin image","Pin image on repin page","Pin image on repin page"),src:i,fit:"cover",naturalHeight:84,naturalWidth:84,color:e})})})}),(0,l.jsx)(c.xu,{color:"white",position:"fixed",top:!0,bottom:!0,right:!0,left:!0,dangerouslySetInlineStyle:{__style:ve(r)},children:(0,l.jsxs)(c.kC,{alignItems:"center",direction:"column",height:"100%",justifyContent:"center",children:[(0,l.jsx)(be,{delay:1200,startAnimation:r,children:(0,l.jsx)(c.zd,{rounding:2,width:148,children:(0,l.jsx)(c.kC,{alignItems:"stretch",justifyContent:"start",wrap:!0,children:Array.from(Array(4)).map(((e,i)=>{const n=i<=1,t=i%2,r=0===i?this.pinDestinationRef:null;return(0,l.jsx)(c.xu,{ref:r,color:0===i?"transparent":"lightGray",marginBottom:n?1:0,marginEnd:t?0:1,width:72,height:72},i)}))})})}),(0,l.jsx)(c.xu,{paddingX:4,dangerouslySetInlineStyle:{__style:_e(r)},children:(0,l.jsx)(c.X6,{children:(0,pe.nk)(this.props.i18n._("You saved your first Pin to {{ selectedBoardName }}!","First repin confirmation message","First repin confirmation message"),{selectedBoardName:n})})})]})})]})}}const je=function(e){const i=(0,a.ZP)();return(0,l.jsx)(Se,{...e,i18n:i})};var we=n(474809),Pe=n(928583);function Ie(e,i,n){return i in e?Object.defineProperty(e,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[i]=n,e}const Be=(0,r.connect)((({session:e})=>({paddingBottom:72+((0,Pe.Rq)(e.userAgentPlatform)?Pe.Vf:0)})))((({children:e,paddingBottom:i})=>(0,l.jsx)(c.xu,{dangerouslySetInlineStyle:{__style:{paddingBottom:i}},children:e})));class Te extends t.PureComponent{constructor(...e){super(...e),Ie(this,"state",{dupeWarningDismissed:!1,pinDescription:(this.props.pin.description||"").trim(),saved:!1,suggestedBoardName:void 0,trackingParams:(this.props.location.state||{}).trackingParams||"",warningAnchor:void 0}),Ie(this,"saved",(()=>this.setState({saved:!0}))),Ie(this,"handleBackButtonTouch",(()=>{const{match:{params:{boardId:e}}}=this.props,i=e?34:75;(0,Y.So)({view_type:21,view_parameter:87,component:7,element:i})})),Ie(this,"handleDismissWarningFlyout",(()=>this.setState({dupeWarningDismissed:!0}))),Ie(this,"handleFirstBoardCreateOnSuccess",((e,i)=>{const{closeupExperience:n,completeExperience:t,history:r,i18n:o,repinExperience:s,showRepinConfirmation:a}=this.props,{boardId:d,boardUrl:c}=e,{href:p,text:h}=(0,z.Io)(c,i,o),{duration:u,text:g,thumbnail:m}=(0,U.qV)({boardId:d,isFBC:!0});r.goBack(),a((({onHide:e})=>(0,l.jsx)(x.Z,{duration:u,href:p,onHide:e,text:g||h,thumbnail:m}))),n&&n.placement_id&&503459===n.experience_id&&t(n.placement_id,n.experience_id),s&&f(s,501032)&&t(s.placement_id,s.experience_id)})),Ie(this,"handleSetSelectedBoard",(e=>{const{history:i,pin:n}=this.props,{trackingParams:t}=this.state;this.isFirstBoardCreateActive()||i.push(`/board/create/${n.id}/${e}/`,{trackingParams:t}),this.setState({suggestedBoardName:e})})),Ie(this,"handleFirstBoardCreate",(e=>{const{createBoard:i,history:n,pin:t,showToast:r}=this.props,{trackingParams:o}=this.state;return i(e).then((e=>{const i=e.resource_response.data.id;(0,Y.j)({event_type:5,view_type:3,component:7,view_parameter:(0,X.A)(t),object_id_str:t.id,clientTrackingParams:(0,b.Z)(o,t.tracking_params),aux_data:{board_id:i,destination_board_id:i}});const{data:n}=e.resource_response,{url:r}=n;return{boardId:i,boardUrl:r}}),(e=>{throw{onError:()=>{n.goBack(),r((({onHide:i})=>(0,l.jsx)(j.ZP,{onHide:i,variant:"error",text:e.message||this.props.i18n._("Sorry! Something went wrong on our end.","error creating board","error creating board")})))}}}))})),Ie(this,"handleSelectBoard",(e=>{const{history:i,pin:n,location:{search:t}}=this.props,{trackingParams:r}=this.state,{isEditingPin:o,pinBoardId:s,pinSectionId:a}=_.parse(t);o?i.push(`/pin/${n.id}/repin/${e.id}/?isEditingPin=true&pinBoardId=${s}&pinSectionId=${a}`,{trackingParams:r}):i.push({pathname:`/pin/${n.id}/repin/${e.id}/`},{trackingParams:r})})),Ie(this,"handleClickAddSectionButton",(()=>{const{pin:e,history:i,match:{params:{boardId:n}},location:{search:t}}=this.props;if(!n)return;const{isEditingPin:r,pinBoardId:o,pinSectionId:s}=_.parse(t);r?i.push(`/pin/${e.id}/repin/${n}/add/?isEditingPin=true&pinBoardId=${o}&pinSectionId=${s}`):i.push({pathname:`/pin/${e.id}/repin/${n}/add/`})})),Ie(this,"handleRepinToExistingSectionSuccess",(()=>this.props.history.go(-2))),Ie(this,"handleRepinToNewSectionSuccess",(()=>this.props.history.go(-3))),Ie(this,"handleRepinCreateBoardButtonTouch",(()=>{(0,Y.So)({view_type:21,view_parameter:87,component:7,element:249})})),Ie(this,"renderCreateScreen",(()=>{const{pin:e,history:i,location:{search:n},match:{params:{boardId:t}}}=this.props,{pinDescription:r,trackingParams:o}=this.state,{isEditingPin:s,pinBoardId:a,pinSectionId:d}=_.parse(n);return!!t&&(0,l.jsx)(A,{boardId:t,history:i,isEditingPin:s,pinBoardId:a,pinSectionId:d,onSuccess:this.handleRepinToNewSectionSuccess,pin:e,pinDescription:r.trim(),trackingParams:o,useRoundedCorners:!0})})),Ie(this,"isFirstBoardCreateActive",(()=>{const{allBoards:e,isFetchingBoards:i,saveToProfileEnabled:n,repinExperience:t}=this.props;return!!f(t,501032)||!i&&0===e.length&&!n})),Ie(this,"isBoardCreateEduActive",(()=>{const{repinExperience:e}=this.props;return f(e,501021)})),Ie(this,"completeBoardCreateEduExperience",(()=>{const{completeExperience:e,repinExperience:i}=this.props;i&&this.isBoardCreateEduActive()&&e(i.placement_id,i.experience_id)})),Ie(this,"renderPicker",(()=>{var e,i;const{allBoards:n,saveToProfileEnabled:t,boardsShortlist:r,history:a,isFetchingBoards:d,location:p,pin:h,match:{params:{boardId:u}},location:{search:g}}=this.props,{pinDescription:x,dupeWarningDismissed:b,saved:f,suggestedBoardName:y,trackingParams:S,warningAnchor:j}=this.state,w=x.trim(),P=h.pinned_to_board,I=P?(0,pe.nk)(this.props.i18n._("Psst! You already saved this Pin to {{ board_name }}","Toast for already having repinned pin","Toast for already having repinned pin"),{board_name:P.name}).join(" "):null,{dominant_color:B}=h,T=h.images?h.images["236x"]:null,k=T?T.url:"",{isEditingPin:C,isFromToast:A,pinBoardId:F,pinSectionId:R}=_.parse(g),E=this.props.i18n._("Save Pin to","RepinPage.Section.Header.Title","title for section selection in repin flow"),Z=new c.Ry(2),L=this.props.i18n._("Create board","Title for first board create",'Title for first board create. NOTE: we are testing using "collections" in place of "boards" for new users'),N=this.props.i18n._("Save to board","boardPicker.header","Title for repin page"),O=u?E:0!==n.length||d||t?N:L;return(0,l.jsxs)(v.default,{hasFixedHeader:!0,children:[(0,l.jsx)(o.Z,{text:O}),(0,l.jsx)(ee.FixedHeader,{useRoundedCorners:!0,zIndex:Z,children:(0,l.jsxs)(c.kC,{alignItems:"center",height:40,justifyContent:"start",children:[(0,l.jsx)(c.xu,{column:2,children:(0,l.jsx)(s.Z,{color:"darkGray",icon:u?"arrow-back":"cancel",onTouch:this.handleBackButtonTouch,alignIconLeft:!0,size:"sm"})}),(0,l.jsx)(c.xu,{column:8,children:(0,l.jsx)(re.Z,{id:"repin-page-title",children:(0,l.jsx)(c.xv,{align:"center",weight:"bold",children:O})})}),(0,l.jsx)(c.xu,{column:2})]})}),h.images&&(this.isFirstBoardCreateActive()?(0,l.jsx)(je,{onComplete:this.handleFirstBoardCreateOnSuccess,pinDominantColor:null!=B?B:"",pinImageUrl:null!=k?k:"",savePin:this.handleFirstBoardCreate,selectedBoardName:y}):null),(0,l.jsx)(Be,{children:u?(0,l.jsx)(te,{boardId:u,onSuccess:this.handleRepinToExistingSectionSuccess,pin:h,pinDescription:w,trackingParams:S,dismissFlyout:this.saved,showSectionRep:!0,history:a,location:p}):(0,l.jsx)(K,{allBoards:n,boardsShortlist:r,saveToProfileEnabled:t,history:a,isFetchingBoards:d,isFirstRepinExperience:this.isFirstBoardCreateActive(),isFromToast:A,location:p,onFirstBoardCreate:this.handleSetSelectedBoard,onSelect:this.handleSelectBoard,pin:h,pinDescription:w,dismissFlyout:this.saved,isEditingPin:C,pinBoardId:F,pinSectionId:R})}),u?(0,l.jsx)(de.Wx,{onAddNewSection:this.handleClickAddSectionButton,useIconWithBackground:!0}):(0,l.jsx)(ae.Z,{modalHeader:(0,D.Bb)(this.props.i18n),nextLocation:`/board/create/${h.id}/`,children:(0,l.jsx)(ie,{history:a,isFirstBoardCreateActive:this.isFirstBoardCreateActive(),pin:h,pinDescription:w,trackingParams:S,onTouch:this.handleRepinCreateBoardButtonTouch,useIconWithBackground:!0,isEditingPin:C,pinBoardId:F,pinSectionId:R})}),T&&this.isBoardCreateEduActive()&&(0,l.jsx)(m,{completeExperience:this.completeBoardCreateEduExperience,pinDominantColor:null!=B?B:"",pinImageHeight:null!==(e=T.height)&&void 0!==e?e:1,pinImageWidth:null!==(i=T.width)&&void 0!==i?i:1,pinImageUrl:null!=k?k:""}),j&&!f&&h.pinned_to_board&&!b&&I&&(0,l.jsx)(c.J2,{anchor:j,color:"red",idealDirection:"down",onDismiss:this.handleDismissWarningFlyout,shouldFocus:!1,children:(0,l.jsx)(c.xu,{padding:3,children:(0,l.jsx)(c.xv,{color:"inverse",weight:"bold",children:(0,l.jsx)("span",{children:I})})})})]})}))}componentDidMount(){const{repinExperience:e,triggerExperimentsForPlacement:i,viewExperience:n}=this.props;i(1000153),e&&n(1000153,e.experience_id)}render(){return(0,l.jsx)(y.ZP,{accessibilityModalLabel:this.props.i18n._("Repin page","RepinPage.MobileModal.AccessibilityLabel","Accessibility label on repin page"),isOpen:!0,type:"repinPage",closeOnOutsideClick:!1,onDismiss:()=>{},children:(0,l.jsx)(c.xu,{paddingX:2,paddingY:0,height:window.innerHeight-ce.i_,children:(0,l.jsxs)(T.rs,{children:[(0,l.jsx)(T.AW,{exact:!0,path:"/pin/:id/repin/",render:this.renderPicker}),(0,l.jsx)(T.AW,{exact:!0,path:"/pin/:id/repin/:boardId/",render:this.renderPicker}),(0,l.jsx)(T.AW,{exact:!0,path:"/pin/:id/repin/:boardId/add/",render:this.renderCreateScreen})]})})})}}const ke=(0,N.compose)(T.EN,Z.Z,(0,r.connect)((({experiences:e,pins:i,session:n,users:t},{match:r})=>({closeupExperience:e[1000112],repinExperience:e[1000153]})),((e,{location:i,match:n})=>{const t=n.params.id,r=(0,b.Z)((i.state||{}).trackingParams);return{completeExperience:(i,n)=>e((0,we.CK)(i,n)),triggerExperimentsForPlacement:i=>e((0,we.kd)(i)),viewExperience:(i,n)=>e((0,we.UT)(i,n)),createBoard:i=>e((0,W.aX)(i,"public",t,r))}})))((function(e){const{match:{params:{id:i}}}=e,n=(0,a.ZP)(),t=(0,r.useSelector)((e=>e.session.userId)),o=(0,r.useSelector)((e=>e.users[t])),s=(0,oe.Z)(`/pin/${i}/`),d=(c=i,(0,q.Z)({name:"PinResource",options:{id:c,field_set_key:"repin"}}),(0,r.useSelector)((({pins:e})=>e[c])));var c;const{isFetching:p,allBoards:h,boardsShortlist:u}=(e=>{const i=(0,r.useSelector)((e=>e.session.userId)),{isFetching:n}=(0,q.Z)({name:"BoardPickerBoardsResource",options:{pin_id:e,field_set_key:"profile_grid_item",shortlist_suggestions:3,user_id:i}});return{isFetching:n,allBoards:(0,r.useSelector)((e=>(0,le.Is)(e)||[])),boardsShortlist:(0,r.useSelector)((({pins:i})=>i[e]&&i[e].boards_shortlist||[]))}})(i);return(0,se.Z)({name:"UserResource",options:{user_id:t,field_set_key:"quicksave"}}),s||!!d&&(0,l.jsx)(Te,{...e,i18n:n,pin:d,allBoards:h,saveToProfileEnabled:o.has_quicksave_board,boardsShortlist:u,isFetchingBoards:p})}))},144977:(e,i,n)=>{n.d(i,{Z:()=>o});var t=n(883119),r=n(785893);function o(e){const{children:i,display:n,id:o}=e;return(0,r.jsx)(t.xu,{"data-test-id":o,display:n,children:i})}},193640:(e,i,n)=>{n.d(i,{Z:()=>o});var t=n(928522),r=n(740049);function o(e,i){if(i&&!(()=>{try{return window.localStorage.test=2,!1}catch(e){return!0}})()){const i=window.open(e,"_blank");return i&&(i.opener=null),i}{const i=(0,t.Z)(e);return setTimeout((()=>{(0,r.My)("setting_new_window_location")}),0),window.location.href=i,window}}},916389:(e,i,n)=>{n.d(i,{b7:()=>a.b7,bN:()=>d,p4:()=>c,ZP:()=>l});var t=n(371974),r=n(883119),o=n(263116),s=n(785893),a=n(747678);const d=(0,o.ZP)({resolved:{},chunkName:()=>"DesktopModal",isReady(e){const i=this.resolve(e);return!0===this.resolved[i]&&!!n.m[i]},importAsync:()=>n.e(51879).then(n.bind(n,917404)),requireAsync(e){const i=this.resolve(e);return this.resolved[i]=!1,this.importAsync(e).then((e=>(this.resolved[i]=!0,e)))},requireSync(e){const i=this.resolve(e);return n(i)},resolve(){return 917404}}),c=(0,o.ZP)({resolved:{},chunkName:()=>"MobileModal",isReady(e){const i=this.resolve(e);return!0===this.resolved[i]&&!!n.m[i]},importAsync:()=>n.e(72430).then(n.bind(n,319514)),requireAsync(e){const i=this.resolve(e);return this.resolved[i]=!1,this.importAsync(e).then((e=>(this.resolved[i]=!0,e)))},requireSync(e){const i=this.resolve(e);return n(i)},resolve(){return 319514}});function l(e){const i=(0,t.ZP)(),n=void 0===e.isOpen||e.isOpen;if("desktop"===i&&n){const{isOpen:i,mobileAccessibilityCloseIconLabel:n,mobileAllowScroll:t,mobileHideCloseIcon:r,mobileIsFullscreen:o,mobileIsSlideUp:a,type:c,...l}=e;return(0,s.jsx)(d,{...l})}const{allowClickAndDrag:r,allowMediaPlay:o,allowScroll:a,role:l,size:p,...h}=e;return(0,s.jsx)(c,{...h,isOpen:n})}},747678:(e,i,n)=>{n.d(i,{b7:()=>s,ZM:()=>a,i_:()=>d,bf:()=>l,JN:()=>p,Vf:()=>h,ju:()=>u});var t=n(800065),r=n(911439),o=n(883119);const s=new o.Ry(1e3),a=new o.H3([t.Z]),d=12,c={headingOffset:{__style:{marginLeft:-10,marginRight:50}},RTLheadingOffset:{__style:{marginRight:-10,marginLeft:50}},mask:{baseStyles:{backgroundColor:"rgba(0,0,0, .5)",height:"100%",touchAction:"none",transitionProperty:"opacity",transitionTimingFunction:"ease-out",width:"100%",zIndex:1}},modal:{baseStyles:{border:(0,r.Yc)()?void 0:"1px solid #efefef",touchAction:"none",transitionProperty:"transform, opacity",transitionTimingFunction:"ease-out",width:"100vw",zIndex:1,left:"0px",bottom:0,borderRadius:"32px 32px 0px 0px",boxShadow:"0px 0px 8px rgba(0, 0, 0, 0.1)",overflow:"hidden"},tabletStyles:{border:void 0,borderRadius:"32px",top:"50%",left:"50%",minWidth:"350px",touchAction:"none",transform:"translate(-50%, -50%)",transitionProperty:"transform, opacity",transitionTimingFunction:"ease-out",zIndex:1},nonTabletSignUpStyles:{border:void 0,borderRadius:"32px",top:"50%",touchAction:"none",transform:"translate(0%, -50%)",transitionProperty:"transform, opacity",transitionTimingFunction:"ease-out",zIndex:1,left:"8px",right:"8px",background:"#FFFFFF"},baseStylesSliding:{border:(0,r.Yc)()?void 0:"1px solid #efefef",touchAction:"none",width:"100vw",height:"",zIndex:1,left:0,bottom:0,borderRadius:"32px 32px 0px 0px",boxShadow:"0px 0px 8px rgba(0, 0, 0, 0.1)"},fullscreenStyles:{touchAction:"none",transitionProperty:"transform, opacity",transitionTimingFunction:"ease-out",width:"90vw",height:"70vh",borderRadius:"8px",zIndex:1,left:"5vw",bottom:"13vh",overflowY:"hidden"},tabletNarrowStyle:{width:425,left:"50%",transform:"translateX(-50%)"}}},l=()=>({__style:c.mask.baseStyles}),p=({isFullscreen:e,isTablet:i,modalStyle:n,type:t})=>{const r=c.modal.fullscreenStyles;let o;return o=e?r:i?c.modal.tabletStyles:"signup"===t?c.modal.nonTabletSignUpStyles:{...c.modal.baseStyles,borderRadius:"32px 32px 0 0"},{__style:n||o}},h=({isFullscreen:e,isTablet:i,isShowing:n,type:t})=>{let r=c.modal.baseStylesSliding,o=n?"translateY(0)":"translateY(100vh)";return r.height=e?"100vh":"",i&&"related_interests_modal"===t&&(r={...r,...c.modal.tabletNarrowStyle},o=n?"translate(-50%, 0)":"translate(-50%, 100vh)"),{__style:{...r,transition:"all 225ms cubic-bezier(0.0,0.0,0.2,1) 500ms",transform:o}}},u=e=>e?c.RTLheadingOffset:c.headingOffset},880881:(e,i,n)=>{n.d(i,{_Y:()=>t,xZ:()=>o,qe:()=>s});const t=(e,i)=>e.length===i.length&&e.every(((e,n)=>function(e,i){if("object"==typeof e&&"object"==typeof i){const n=Object.keys(e),t=Object.keys(i);return n.length===t.length&&n.every((n=>e[n]===i[n]))}return e===i}(e,i[n]))),r=(e,i)=>e.length===i.length&&e.every(((e,n)=>e===i[n])),o=(e,i=r)=>n=>{const t=[];return function(...r){const o=this,s=t.find((e=>e.context===o&&i(e.args,r)));if(s)return s.result;const a={context:o,args:r,result:n.apply(this,r)};return t.push(a),e&&t.length>e&&t.shift(),a.result}},s=o(1);o()}},e=>{var i=i=>e(e.s=i);e.O(0,[97270,83119,41659,12506,98177,53465,39136,36838,85863,2338,41012,50900,79596,63570,15180],(()=>(i(986577),i(265146),i(690447),i(639673))));e.O()}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/www/pin/[id]/repin-mobile-4967124015263da9.mjs.map