(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[85863],{294184:(e,r)=>{var o;!function(){var t={}.hasOwnProperty;function a(){for(var e=[],r=0;r<arguments.length;r++){var o=arguments[r];if(o){var s=typeof o;if("string"===s||"number"===s)e.push(o);else if(Array.isArray(o)&&o.length){var n=a.apply(null,o);n&&e.push(n)}else if("object"===s)for(var c in o)t.call(o,c)&&o[c]&&e.push(c)}}return e.join(" ")}e.exports?(a.default=a,e.exports=a):void 0===(o=function(){return a}.apply(r,[]))||(e.exports=o)}()},644748:(e,r,o)=>{o.d(r,{of:()=>_,SD:()=>f,Xi:()=>y,xR:()=>b,$z:()=>x,OA:()=>g,YQ:()=>P,ZN:()=>R,fv:()=>C,uD:()=>E,g:()=>Z,dK:()=>I,Vq:()=>w,L1:()=>B,aX:()=>D,xk:()=>O,YV:()=>U,KQ:()=>$});var t=o(71445),a=o(724207),s=o(164711),n=o(651487),c=o(689783),i=o(474809),d=o(782677),l=o(261484),u=o(138365);const p=(e,r)=>({type:u.Bc,payload:{id:e,value:r}}),_=e=>({type:u.XV,payload:{boardId:e}}),h=(e,r)=>({type:u.Aj,payload:{boardId:e,value:r}}),m=(e,r,o,t)=>({type:u.wc,payload:{boardId:e,userIds:r,viewingUser:o,status:t}}),v=(e,r)=>({type:u.Wn,payload:{...r,id:e}}),f=(e,r)=>o=>(o(((e,r)=>({type:u.Tl,payload:{boardId:e,userId:r}}))(e,r)),a.ZP.create("BoardInviteResource",{board_id:e,invited_user_id:r}).callUpdate()),y=(e,r,o=!1)=>t=>(t(((e,r,o)=>({type:u.AZ,payload:{boardId:e,userId:r,isRequestToJoin:o}}))(e,r,o)),a.ZP.create("BoardInviteResource",{board_id:e,invited_user_id:r}).callUpdate()),b=(e,r)=>o=>(o(((e,r)=>({type:u.CD,payload:{boardId:e,userId:r}}))(e,r)),a.ZP.create("BoardInviteResource",{board_id:e,invited_user_id:r}).callDelete()),x=(e,r,o)=>t=>(t(m(e,r,o,"new")),a.ZP.create("BoardInviteResource",{board_id:e,invited_user_ids:r}).callCreate()),g=(e,r)=>()=>a.ZP.create("BoardEmailInviteResource",{board_id:e,emails:r}).callCreate(),P=(e,r,o,t)=>s=>{const n="accepted"===r?"BoardCollaboratorResource":"BoardInviteResource";return s(((e,r,o)=>({type:u.Fi,payload:{boardId:e,userId:r,viewingUser:o}}))(e,o,t)),a.ZP.create(n,{board_id:e,field_set_key:"boardEdit",invited_user_id:o}).callDelete().catch((()=>s(m(e,[o],t,r))))},R=e=>r=>{a.ZP.create("BoardFollowResource",{board_id:e}).callCreate().catch((()=>r(p(e,!1)))),r(p(e,!0))},C=e=>r=>{a.ZP.create("BoardFollowResource",{board_id:e}).callDelete().catch((()=>r(p(e,!0)))),r(p(e,!1))};function k(e,r){return a.ZP.create("BoardCollaboratorRequestResource",{board_id:e,requesting_user_id:r})}const E=e=>r=>{const o={board_id:e},t="BoardResource";return a.ZP.create(t,o).callGet().then((o=>{const t=(0,d.Fv)(o.resource_response.data,s.Z.BoardResource).entities.board[e];return r(v(e,t)),o}))},Z=e=>(r,o)=>{const{session:{userId:t}}=o();k(e,t).callCreate().catch((()=>{r(h(e,!1))})),r(h(e,!0))},I=e=>(r,o)=>{const{session:{userId:t}}=o();k(e,t).callDelete({showError:!1}).catch((()=>{r(h(e,!0))})),r(h(e,!1))},w=(e,r)=>(o,t)=>{const{boards:n}=t(),c=n[e];return o(v(e,r)),a.ZP.create("BoardResource",{...r,board_id:e}).callUpdate().then((r=>{const t=(0,d.Fv)(r.resource_response.data,s.Z.BoardResource);return o(v(e,t.entities.boards[e])),r})).catch((r=>{throw c&&o(v(e,c)),r}))},B=(e,r,o,t)=>s=>{const n=a.ZP.create("BoardResource",{board_id:o}).callDelete();return s(((e,r,o,t)=>({type:u.OC,payload:{viewingUserId:e,viewingUsername:r,boardId:o,boardPinCount:t}}))(e,r,o,t)),n},D=(e,r,o,t)=>(u,p)=>{const _=p(),{userId:h}=_.session,m="BoardResource",v={name:e,privacy:r,return_existing:!1,initial_pins:o?[o]:[],user_id:h,initial_pin_client_tracking_params:t?[t]:[]};return a.ZP.create(m,v).callCreate().then((e=>{const r=(0,d.Fv)(e.resource_response.data,s.Z.BoardResource);u((0,c.XM)(m,v,e,r)),u((0,i.fO)({event_type:20})),u((0,l.bi)("UserResource",{options:{user_id:h,field_set_key:"save_behavior"}}));const o=`profile-boards:${e.resource_response.data.owner.username}`;return p().feeds[o]&&u((0,n.Q)(o,[{id:e.resource_response.data.id,type:"board"}],{isPrepend:!0})),e}))},O=(e,r)=>o=>a.ZP.create("BoardArchiveResource",{boardId:e}).callUpdate().then((t=>{var a,s;return o((0,n.Q)("archived-boards",[{id:e,type:"board"}])),o((a=e,s=r,{type:u.VP,payload:{boardId:a,username:s}})),t})),U=(e,r)=>o=>a.ZP.create("BoardArchiveResource",{boardId:e}).callDelete().then((t=>{var a;return o((0,n.Q)(`profile-boards:${r}`,[{id:e,type:"board"}])),o((a=e,{type:u.s1,payload:{boardId:a}})),t})),$=(e,r)=>o=>a.ZP.create("SocialSearchCampaignResource",{boardId:e}).callGet().then((a=>{if(!a||!a.resource_response)return{};const s=a.resource_response.data||{},n=(s.model||{}).custom_properties||{},{campaign_id:c="unknown"}=n,i=s.display_data||{},d=!!s.display_data,l=i.header_image_mobile,p=i.header_background_color,_=i.text_icon_color,h={boardId:e,isSocialSeasonalBoard:d,socialHeaderBgImage:l,socialHeaderBgColor:p,textIconColor:_};return t.Z.increment(`mweb.seasonal_board.${c}.${r}.land`),o((e=>({type:u.o3,payload:e}))(h))}))},651487:(e,r,o)=>{o.d(r,{Q:()=>a});var t=o(138365);const a=(e,r,o=Object.freeze({}))=>({type:t.MU,payload:{id:e,options:o,items:r}})},487889:(e,r,o)=>{o.d(r,{Z:()=>n});var t=o(667294),a=o(785893);function s(e,r){let o=e.slice(1);if(o=o.endsWith("Context")?o:`${o}Context`,r){return{hocDisplayName:`with${e[0].toUpperCase()}${o}(${r})`}}return{propsDisplayName:`${e[0].toLowerCase()}${o}`,messageDisplayName:`${e[0].toUpperCase()}${o}`}}function n(e,r){const o=(0,t.createContext)(r),{propsDisplayName:n,messageDisplayName:c}=s(e);o.displayName=c;const i=o.Provider,d=({children:e})=>{const r=(0,t.useContext)(o);if(void 0===r)throw new Error(`${c}Consumer must be used within a ${c}Provider.`);return e(r)},l=()=>(0,t.useContext)(o);function u(r){const{hocDisplayName:i}=s(e,String(r.displayName||r.name)),d=e=>{const s=(0,t.useContext)(o);if(void 0===s)throw new Error(`${i} must be used within a ${c}Provider.`);if(e[n])throw new Error("Parent Component and Context are passing to the component the same variables.");const d={[n]:s};return(0,a.jsx)(r,{...e,...d})};return d.displayName=i,d}return i.displayName=`${c}Provider`,d.displayName=`${c}Consumer`,u.displayName=`${c}HOC`,{Provider:i,Consumer:d,MaybeConsumer:({children:e})=>e((0,t.useContext)(o)),useMaybeHook:l,useHook:function(){const e=l();if(void 0===e)throw new Error(`use${c} must be used within a ${c}Provider.`);return e},deprecatedHOC:u}}},474809:(e,r,o)=>{o.d(r,{fO:()=>i,pz:()=>d,UT:()=>u,CK:()=>p,Qu:()=>_,d9:()=>h,kd:()=>m,YX:()=>v,N:()=>f});var t=o(724207),a=o(23686),s=o(71445),n=o(827132);let c;const i=(e,r)=>o=>{const a=r?{extra_context:e,targeting:r}:{extra_context:e};return t.ZP.create("UserExperiencePlatformResource",a).callGet().then((e=>e.resource_response?o((0,n.OD)(e.resource_response.data)):void 0))},d=(e,r,o,s)=>(i,d)=>{if(r)return Promise.resolve();if(s&&(c=s),1===e.length){const r=e[0],t=d().experiences[r],s=(null==t?void 0:t.extraContext)||null;if(JSON.stringify(s)===JSON.stringify(o)||(0,a.E3)(t)&&!(o&&Object.keys(o).length>0))return Promise.resolve()}return t.ZP.create("UserExperienceResource",{placement_ids:e,extra_context:o||null,targeting:s}).callGet().then((e=>e.resource_response?i((0,n.cL)(e.resource_response.data)):void 0))},l=(e,r)=>(o,a,s,d=!1,l,u)=>(p,_)=>{const{experiences:h,experiencesMulti:m}=_();let v=null,f=!0;var y;d||(f=h[o]&&h[o].experience_id===a,v=f?h[o]:Array.isArray(m[o])&&(null===(y=m[o])||void 0===y?void 0:y.find((e=>e.experience_id===a))));if(v&&v.experience_id===a||d&&o&&a){const d=t.ZP.create(e,{placed_experience_id:`${o}%3A${a}`,extra_context:null!=l?l:{},targeting:u}),_=f?n.Yb:n.xW;switch(r){case"dismissed":return d.callDelete().then((()=>{p(_(o,a,r)),p(i(void 0,c))}));case"completed":return d.callUpdate().then((()=>{s||(p(_(o,a,r)),p(i(void 0,c)))}));case"viewed":return p(_(o,a,r)),d.callUpdate().then((()=>{1000162===o&&p(i())}));case"completedWithoutHomefeed":return d.callUpdate().then((()=>{s||p(_(o,a,r))}));default:return Promise.resolve()}}return Promise.resolve()},u=l("UserExperienceViewedResource","viewed"),p=l("UserExperienceCompletedResource","completed"),_=l("UserExperienceResource","dismissed"),h=l("UserExperienceCompletedResource","completedWithoutHomefeed"),m=(e,r)=>(o,a)=>{const{experiences:n}=a(),c=n[e];c&&c.triggerable_placed_exps&&c.triggerable_placed_exps.length&&c.triggerable_placed_exps.forEach((o=>{const[,a]=o.split(":");let n=r;c.metadata&&c.metadata[a]&&(n=Object.assign({},r,c.metadata[a])),t.ZP.create("UserExperienceTriggerResource",{placed_experience_id:o.replace(":","%3A"),extra_context:n}).callUpdate().then((()=>{((e,r,o={})=>{s.Z.increment(`${e}.${r}`,1,o)})("experienceservice","experimentTriggerCall.1",{placement_id:e,experience_id:a})}))}))},v=e=>(r,o)=>{r(m(e));const{experiences:t}=o();return t[e]},f=(e,r,o)=>t=>{o&&(c=o),t(m(e,r)),r&&Object.keys(r).length>0&&t(d([e],!1,r,o))}},23686:(e,r,o)=>{function t(e){return!!e&&0!==e.type}o.d(r,{E3:()=>t,MQ:()=>a,A0:()=>s});const a=(e,r,o)=>{const a=e[o];return r[o]&&t(a)?a:null};function s(e){var r;return null===(r=e.display_data)||void 0===r?void 0:r.anchor}},827132:(e,r,o)=>{o.d(r,{xW:()=>s,NW:()=>n,Yb:()=>c,OD:()=>i,cL:()=>d});var t=o(724207),a=o(395005);const s=(e,r,o)=>({type:a.V$,payload:{placementId:e,experienceId:r,status:o}}),n=e=>r=>t.ZP.create("UserExperiencePlatformResource",{extra_context:e,multiExperiencePlatform:!0}).callGet().then((e=>{return e.resource_response?r((o=e.resource_response.data,{type:a.$S,payload:{experiencesMulti:o}})):void 0;var o})),c=(e,r,o)=>({type:a.iY,payload:{placementId:e,experienceId:r,status:o}}),i=e=>({type:a._4,payload:{experiences:e}}),d=e=>({type:a.mR,payload:{experiences:e}})},710159:(e,r,o)=>{o.d(r,{oz:()=>s,q6:()=>a,ZP:()=>c});var t=o(487889);const{Provider:a,Consumer:s,useHook:n}=(0,t.Z)("i18n"),c=n},841229:(e,r,o)=>{o.d(r,{Z:()=>s});const t=new Set(["bookmarks","client_tracking_params","get_page_metadata","in_nux","invite_code","no_fetch_context_on_resource","original_referrer","source","top_level_source","top_level_source_depth"]),a=e=>!t.has(e)&&!e.startsWith("__track__"),s=e=>e?Object.keys("object"==typeof e&&e||{}).filter((e=>"string"==typeof e)).filter(a).sort().map((r=>`${r}=${JSON.stringify(null==e[r]?null:e[r])}`)).join(","):""},261484:(e,r,o)=>{o.d(r,{U2:()=>i,bi:()=>d,v_:()=>l});var t=o(841229),a=o(724207),s=o(689783),n=o(480769);function c({fetchOptions:e,resource:r,retry:o}){return(i,d)=>{var l,u,p;const{bookmark:_,headers:h,options:m,refresh:v,schema:f}=e,y=(0,t.Z)(m);if(null!==(l=d().resources)&&void 0!==l&&null!==(u=l[r])&&void 0!==u&&null!==(p=u[y])&&void 0!==p&&p.fetching&&!o)return Promise.resolve();const b=o?o.bookmark:_,x=b?{...m,bookmarks:[b]}:m;return i((0,s.LQ)(r,m,!0)),a.ZP.create(r,x).callGet(void 0,h).then((t=>{var d,l,u;const p=null===(d=t.resource_response)||void 0===d?void 0:d.data,[h]=t.bookmarks||[];if(Array.isArray(p)&&0===p.length&&h&&h!==n.q){const t=o?o.count:0;if(!(t>=n.s))return i(c({resource:r,fetchOptions:e,retry:{count:t+1,bookmark:h}}))}null===(l=a.ZP.customDataManipulations)||void 0===l||l.call(a.ZP,r,p,m);const{normalizedResponse:y,resourceSchema:b}=(null===(u=a.ZP.normalizeResponse)||void 0===u?void 0:u.call(a.ZP,{data:p,opts:{bookmark:_,options:m,schema:f},resource:r}))||{normalizedResponse:null,resourceSchema:void 0};return _?i((0,s.Dm)(r,m,t,y,b)):(i((0,s.Sr)(r,m,t,y,v,b)),a.ZP.fetchCompleteCallback&&a.ZP.fetchCompleteCallback({resource:r,options:m,response:t,normalizedResponse:y,refresh:v,resourceSchema:b})),Promise.resolve()}),(e=>{i((0,s.Tl)(r,m,e))}))}}const i=(e,{bookmark:r,headers:o,options:t,schema:a})=>c({resource:e,fetchOptions:{bookmark:r,headers:o,options:t,refresh:!1,schema:a}}),d=(e,{headers:r,options:o,schema:t})=>c({resource:e,fetchOptions:{headers:r,options:o,refresh:!0,schema:t}});function l(e,r,o){return t=>{const{options:n}=r;return a.ZP.create(e,n).callCreate().then((r=>{var a;if(null!==(a=r.resource_response)&&void 0!==a&&a.data){const a=r.resource_response.data,c=(null==o?void 0:o(a))||null;t((0,s.XM)(e,n,r,c))}return r}),(r=>(t((0,s.Tl)(e,n,r)),r)))}}},480769:(e,r,o)=>{o.d(r,{q:()=>t,s:()=>a});const t="-end-",a=10},824941:(e,r,o)=>{o.d(r,{AF:()=>t,KK:()=>a,cR:()=>s,zP:()=>n,aW:()=>c,se:()=>i});const t="CREATE_COMPLETE",a="FETCHING",s="FETCH_ERROR",n="FETCH_COMPLETE",c="FETCH_MORE_COMPLETE",i="RESOURCE_INVALIDATE"},689783:(e,r,o)=>{o.d(r,{XM:()=>a,LQ:()=>s,Tl:()=>n,Sr:()=>c,Dm:()=>i,jB:()=>d});var t=o(824941);function a(e,r,o,a){return{type:t.AF,payload:{resource:e,options:r,response:o,normalizedResponse:a}}}function s(e,r,o){return{type:t.KK,payload:{resource:e,options:r,isFetching:o}}}const n=(e,r,o)=>({type:t.cR,payload:{resource:e,options:r,error:o}});function c(e,r,o,a,s,n){return{type:t.zP,payload:{isRefresh:s,normalizedResponse:a,options:r,resource:e,response:o,schema:n}}}function i(e,r,o,a,s){return{type:t.aW,payload:{resource:e,options:r,response:o,normalizedResponse:a,schema:s}}}function d(e,r={}){return{type:t.se,payload:{resource:e,options:r}}}},379771:(e,r,o)=>{o.d(r,{Z:()=>u});var t=o(667294),a=o(40142),s=o(841229),n=o(480769),c=o(855168),i=o(952733),d=o(261484);const l={};function u({dangerouslyDisableFetch:e,enabledRouteRefresh:r,__unstableEnableSuspenseSupport:o,headers:u,name:p,noCache:_,options:h,schema:m}){const v=(0,a.useDispatch)(),f=(0,s.Z)(h),y=(0,t.useRef)(null),b=(0,t.useRef)(),x=(0,c.k6)(),g=x&&"POP"!==x.action,P=e=>(e[p]||l)[f]||l,R=(0,a.useSelector)((({resources:e})=>P(e).nextBookmark)),C=(0,a.useSelector)((({resources:e})=>P(e).data)),k=(0,a.useSelector)((({resources:e})=>P(e).auxData)),E=(0,a.useSelector)((({resources:e})=>P(e).error)),Z=(0,a.useSelector)((({resources:e})=>Boolean(P(e).fetching))),I=Boolean(E)||void 0!==C,w=I&&!Z&&R===n.q,B=Boolean(I&&r&&g&&!e),[D,O]=(0,t.useState)(B),U=(0,t.useCallback)((e=>{y.current=v((0,d.U2)(p,{options:h,schema:m,bookmark:e,headers:u}))}),[v,p,f,m,u]),$=()=>{y.current=v((0,d.bi)(p,{options:h,schema:m,headers:u}))},{isBot:S}=(0,i.B)(),A=()=>{if(!e&&b.current!==f){const e=void 0===b.current;b.current=f,!I&&!Z||e&&E&&(({httpStatus:e})=>!e||e>=500)(E)?U():(!S&&_||B)&&$()}};(0,t.useEffect)((()=>{o||A()})),o&&A();const N=(0,t.useCallback)((()=>{e||($(),O(!0))}),[e,d.bi,p,f,u,O]),L=(0,t.useCallback)((()=>{!R||w||Z||e||U(R)}),[e,U,R,w,Z]);if(y.current)if(I&&!Z)y.current=null;else if(o)throw y.current;const T=(0,t.useRef)({auxData:void 0,data:void 0,error:void 0,fetchMore:L,isAtEnd:!1,isFetching:!1,isLoaded:!1,isRefreshing:!1,nextBookmark:void 0,refresh:N}),F={auxData:k,data:C,error:E,fetchMore:L,isAtEnd:w,isFetching:Z,isLoaded:I,isRefreshing:D,nextBookmark:R,refresh:N};return(0,a.shallowEqual)(F,T.current)||(!D||!T.current.data&&B||(0,a.shallowEqual)(F.data,T.current.data)||(F.isRefreshing=!1,O(!1)),T.current=F),T.current}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/85863-2335a671be049f01.mjs.map