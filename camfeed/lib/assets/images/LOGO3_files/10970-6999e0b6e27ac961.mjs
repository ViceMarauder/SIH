(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[10970],{737298:(e,t,o)=>{o.d(t,{eN:()=>c,_:()=>u,kB:()=>l});var n=o(71445),a=o(632589),s=o(855168);const r=["/resource/:name/:method/","/resource/commerce/:name/:method/","/:username/pins/follow/","/email/remove/","/about/trademark/form/:claim_type/","/about/copyright/dmca-pin/web-result/:id/","/about/copyright/dmca-pin/pin/:id/","/about/copyright/dmca-pin/","/about/koplg/","/about/:lawName/","/suspension-appeal/netzdg/","/website/confirm/","/oauth/","/settings/extension/uninstall/","/offsite/","/amp/(.*)"];var i=o(498177);const c=e=>e&&(0,i.Qg)(e)&&a.Z.settings.PASSWORD_RESET_URL!==e?(0,i.Qc)(e).relative:"/",l=e=>{const t=(0,i.Jx)(e);return(e=>{const t=new URL(e,window.location.origin);return r.some((e=>!!(0,s.LX)(t.pathname,{path:e,exact:!0})))})(t)||(0,i.OM)(t)===i.vx.TRUSTED_DIFFERENT_ORIGIN},u=({forceFullPageNavigation:e,history:t,next:o,noLocationReplace:a})=>{const s=(0,i.Jx)(o);l(o)||!t||e?(e&&n.Z.increment("webapp.duplo.navigateOnLogin.forceFullPageNavigation",1),window.location.assign(s)):a?t.push(c(s)):t.replace(c(s))}},927209:(e,t,o)=>{o.d(t,{E:()=>r,S:()=>i});var n=o(667294),a=o(198873);const s="_loggingInNotHome",r=e=>{e?(0,a.Nh)(s,1):(0,a.L_)(s)},i=()=>{const[e,t]=(0,n.useState)(!1);return(0,n.useEffect)((()=>{t(!0)}),[]),e&&(0,a.qn)(s)}},10970:(e,t,o)=>{o.d(t,{x4:()=>A,Pt:()=>N,xs:()=>b});var n=o(186964),a=o(724207),s=o(110078),r=o(738453),i=o(138365),c=o(732337),l=o(518122),u=o(737298),_=o(827132),d=o(927209),g=o(911439),m=o(844783),p=o(112492),h=o(834350),f=o(225628),w=o(402825),k=o(524138),E=o(198873),T=o(740049),R=o(256191),y=o(396500),v=o(759122);const O=(e,t,o)=>({type:i.Df,payload:{user:e,active:t,triggerable:o}}),A=(e,t,o="/",i={isAutologin:!1,isSwitchAccount:!1,goToAccountSettings:!1,noLocationReplace:!1,recaptchaV3Token:"default",noImmediateRedirect:!1,useAlternativeResourceCall:!1,trigger:"other",accountUnlinked:!1},g)=>async(A,N)=>{const{session:b}=N(),{country:L,country_from_hostname:S,country_from_ip:C,region_from_ip:P}=b,x=!b.isTablet&&!b.isMobile,{isAutologin:I,isSwitchAccount:D,goToAccountSettings:U,noLocationReplace:Z,recaptchaV3Token:M,noImmediateRedirect:F,useAlternativeResourceCall:G,trigger:j,accountUnlinked:H}=i;I&&g&&g();const B=(0,p.lJ)(b.origin)&&!1;let $={get_user:!0,...e,app_type_from_client:6,recaptchaV3Token:M};const W=(0,E.qn)(k.zR);W&&($={...$,visited_pages_before_login:W});let Y=B?(0,p.N5)({referrer:b.referrer,facebook_id:b.facebookToken,...e,recaptchaV3Token:M}):a.ZP.create("UserSessionResource",$).callCreate();if(G&&e.username_or_email&&e.password){const t=new FormData;t.append("username",e.username_or_email),t.append("password",e.password);const o={method:"POST",body:t,credentials:"include",headers:{Accept:"application/json, text/javascript, */*","X-CSRFToken":(0,c.getCsrfToken)()||"","X-Requested-With":"XMLHttpRequest"}};Y=fetch("/resource/UserSessionResource/create/",o).then((e=>{if(200!==e.status){const t=new Error(e.statusText);throw t.response=e,t}return e.json()})).catch((e=>Promise.reject(e)))}try{I&&(0,T.dy)({event:"login_api_call_start",provider:e.google_open_id_token?"google":"facebook"});const a=await Y;I&&(0,T.dy)({event:"login_api_call_success",provider:e.google_open_id_token?"google":"facebook"}),A(O(a.resource_response.data.user,a.client_context.active_experiments,a.client_context.triggerable_experiments)),A((0,_.OD)(a.client_context.placed_experiences)),(0,s.Z)("authentication.login_success"),(0,y.h3)({action:I?"autologin":"login",type:(0,l.lp)(e),trigger:j}),n.zN(R.e7.name),n.zN(R.x3.name),(0,E.Nh)(k.AA,1),"/"!==o&&(0,d.E)(!0),D?(0,v.Dm)().then((()=>{const e=U?`/settings/account-settings/?message=${m.pN}`:`/${a.resource_response.data.user.username}`+(H?`?message=${m.aU}`:"");window.location.href=e})):I&&!x||F||(0,u._)({forceFullPageNavigation:x,history:t,next:o,noLocationReplace:Z}),(0,w.c_)({country:L,countryFromHostName:S,countryFromIp:C})&&(0,f.yP)({id:r.gC,eventCategory:"Logins",eventName:"Mobile"}),(0,w.$r)({country:L,countryFromHostName:S,countryFromIp:C,regionFromIp:P})&&(0,f.jw)({id:"flashtalking-m-login",eventCategory:"Logins",eventName:"Mobile"}),(0,w.NR)(L,P)&&(0,f.EN)({pixelId:h.Rj,eventCategory:"Logins",eventName:"Mobile"}),(0,w.Fc)({country:L,countryFromHostName:S,countryFromIp:C})&&(0,f.Be)({pixelId:h.HO,eventCategory:"Logins",eventName:"Mobile"})}catch(z){if(I&&(0,T.dy)({event:"login_api_call_failure",provider:e.google_open_id_token?"google":"facebook"}),1201!==z.apiErrorCode||I)throw(0,y.wp)({action:I?"autologin":"login",type:(0,l.lp)(e),trigger:j}),D&&(0,s.Z)("authentication.login_error"),z;e.google_open_id_token&&(e.gplus_id_token=e.google_open_id_token),t&&t.push({pathname:"/login/mfa/",state:{creds:e,next:o}})}},N=(e={logoutOnAbort:!1})=>async(t,o)=>{const{session:r}=o(),{redirectUrl:i,localStorageItems:c,logoutOnAbort:l,reason:u="user_initiated",source:_}=e,m=!r.isTablet&&!r.isMobile;(0,T.tj)("logout.attempt",{tags:{app:"web_mobile",reason:u,source:_}});try{await a.ZP.create("UserSessionResource",{disable_auth_failure_redirect:!0}).callDelete()}catch(p){if(!l||"abort"!==(null==p?void 0:p.type))throw(0,T.tj)("logout.error",{tags:{app:"web_mobile",reason:u,source:_}}),p;(0,s.Z)("logout.logout_ignored")}if((0,s.Z)("logout.logout_success"),(0,T.tj)("logout",{tags:{app:"web_mobile",reason:u,source:_}}),n.t8(R.e7,"True",(0,n.kZ)(R.e7)),(0,d.E)(!1),(0,E.L_)(g.Uf),(0,E.L_)(k.E9),(0,E.L_)(v.RH),(0,E.L_)(void 0),(0,E.L_)("_epik_localstore"),c)for(const e in c)(0,E.Nh)(e,c[e]);await(0,v.Dm)(),i?window.location.href=i:m&&(window.location.href="/")},b=e=>t=>{t(O(e.resource_response.data.user,e.client_context.placed_experiences,e.client_context.active_experiments)),t((0,_.OD)(e.client_context.placed_experiences))}},860952:(e,t,o)=>{o.d(t,{Z:()=>r});var n=o(193640),a=o(362672),s=o(740049);const r=e=>{(0,a.Z)(e)||(e="/",(0,s.My)("url_reset")),(0,n.Z)(e,!1)}},844783:(e,t,o)=>{o.d(t,{Jl:()=>l,R:()=>u,j2:()=>_,Di:()=>d,aU:()=>g,pN:()=>m,vW:()=>h,ZP:()=>f,rL:()=>w});var n=o(156575),a=o(647136),s=o(123686),r=o(498177),i=o(883119),c=o(785893);const l=7e3,u="permanent_account_closure",_="account_deletion_email_sent",d="account_deactivated",g="unlink_successful",m="account_switch_to_settings";function p(e,t,o){return(0,c.jsx)(i.xv,{align:o||"center",children:(0,s.nk)(e,{username:(0,c.jsx)(i.xv,{inline:!0,weight:"bold",children:t})})})}function h({i18n:e,message:t,multipleAccounts:o,username:n=""}){switch(t){case u:return e._("Your account has been deleted. We're sad to see you go","unauthLoginPage.accountDeletedToast.message","Confirmation message after a user has successfully deleted their account");case _:return p(o?e._("An email has been sent with final steps to delete your account, {{username}} and its linked accounts","accountDeletedEmailToast.message.multipleAccounts","Confirmation message after a user has successfully requested multiple accounts deletion"):e._("An email has been sent with final steps to delete your account, {{username}}","accountDeletedEmailToast.message.singleAccount","Confirmation message after a user has successfully requested a single account deletion"),n);case d:return p(o?e._("The account, {{username}}, and its associated linked accounts have been deactivated","unauthLoginPage.deactivatedToast.message.multipleAccounts","Confirmation message after a user has successfully deactivated multiple accounts"):e._("The account, {{username}}, has been deactivated","unauthLoginPage.deactivatedToast.message.singleAccount","Confirmation message after a user has successfully deactivated a single account"),n);case g:return p(e._("Success! You've unlinked this business account. You are currently in {{username}}.","authHomeFeedPage.unlinkAccountToast.message","Confirmation message after a user has successfully unlinked business account"),n,"start");case m:return p(e._("You've switched into and are currently in the account {{username}}","accountSettings.switchAccountToAccountChanges","Confirmation message after a user has successfully switched accounts and got redirected to Account Changes"),n,"start");default:return""}}function f(e,t,o=""){if(!t||!t.search)return"";const n=(0,r.mB)(t.search).message,a=(0,r.mB)(t.search).username||o;return h({i18n:e,message:n,multipleAccounts:"true"===(0,r.mB)(t.search).multiple_accounts,username:a})}function w({showOneToast:e,i18n:t,location:o,history:s,username:i,fullName:u,avatarUrl:_}){if(!o||!o.search)return;const d=f(t,o,i||""),p=(0,r.mB)(o.search).message,h=p===m||p===g;d&&(e((({onHide:e})=>(0,c.jsx)(a.ZP,{duration:l,onHide:e,text:d,iconThumbnail:h?(0,c.jsx)(n.Z,{name:u||"",src:_||"",size:"md"}):null}))),s.replace(o.hash?`${o.pathname}${o.hash}`:o.pathname))}},112492:(e,t,o)=>{o.d(t,{N5:()=>_,$p:()=>d,lJ:()=>l,VY:()=>g});var n=o(71445),a=o(724207),s=o(632589);const r=e=>Object.keys(e).map((t=>`${encodeURIComponent(t)}=${encodeURIComponent(e[t])}`)).join("&"),i=(e,t,o)=>new Promise(((n,a)=>{const s=new XMLHttpRequest;s.withCredentials=!0,s.open(t,e),"POST"===t&&s.setRequestHeader("Content-type","application/x-www-form-urlencoded; charset=UTF-8"),s.onload=()=>{try{const e=JSON.parse(s.responseText);"success"===e.status?n(e):a({apiErrorCode:e.code,httpStatus:s.status,...e})}catch(e){a({httpStatus:s.status,message:e.message})}},s.onerror=()=>a(s.statusText),s.send(o)})),c=(e,t,o)=>{n.Z.increment(`client.events.login.${t?"auto":"manual"}.${e}`,1,{source:o})},l=e=>s.Z.settings.CORS_HANDSHAKE_DOMAINS.includes(e),u=e=>a.ZP.create("HandshakeSessionResource",{token:e,get_user:!0}).callCreate(),_=e=>{const t={};let o=!1;const n=e.facebook_id?"facebook/handshake":e.gplus_id_token?"gplus/handshake":e.mfa_token?"mfa/handshake":"handshake";if(e.username_or_email&&(t.username_or_email=e.username_or_email.trim(),t.password=e.password,t.referrer=e.referrer,t.token=e.recaptchaV3Token),e.facebook_id){o=e.facebook_autologin||!1;const n=e.facebook_token||"";t.facebook_id=e.facebook_id,t.facebook_token=n,t.facebook_autologin=o}e.gplus_id_token&&(o=e.gplus_autologin||!1,t.gplus_id_token=e.gplus_id_token,t.gplus_access_token=e.gplus_access_token,t.gplus_expires_at=e.gplus_expires_at,t.gplus_autologin=o),e.mfa_token&&(t.mfa_token=e.mfa_token);const a=`/v3/login/${n}/`;return c("attempt",o,a),i(`${s.Z.settings.ACCOUNTS_PINTEREST_URL}${a}`,"POST",r(t)).then((e=>{if(c("success",o,a),e&&e.data)return u(e.data);throw new Error("No custom access token in cross domain login response")})).catch((e=>{throw c("failure",o,a),e}))},d=e=>{const t={},o=e.facebook_id?"facebook/handshake":e.gplus_code||e.gplus_id_token?"gplus/handshake":"email/handshake";if(t.email=e.email||"",t.username=e.username||"",t.password=e.password||"",t.first_name=e.first_name||"",t.last_name=e.last_name||"",t.country=e.country||"",t.locale=e.locale,t.referrer=e.referrer,e.age&&(t.birthday=(e=>{const t=new Date;return t.setFullYear(t.getFullYear()-parseInt(e,10)),parseInt(t/1e3,10).toString()})(e.age)),e.custom_gender&&(t.custom_gender=e.custom_gender),e.gender&&(t.gender=e.gender),e.invite_code&&(t.invite_code=e.invite_code),e.facebook_id){const o=e.facebook_token||"";t.facebook_id=e.facebook_id,t.facebook_token=o,t.social_username=e.social_username||""}else(e.gplus_code||e.gplus_id_token)&&(t.password=e.password||"",t.one_time_code=e.gplus_code,t.id_token=e.gplus_id_token,t.redirect_uri=e.gplus_redirect_uri);return e.recaptchaV3Token&&(t.recaptcha_v3_token=e.recaptchaV3Token),i(`${s.Z.settings.ACCOUNTS_PINTEREST_URL}/v3/register/${o}/`,"POST",r(t)).then((e=>{if(e&&e.data)return u(e.data);throw new Error("No custom access token in cross domain register response")})).catch((e=>{throw e}))},g=()=>i(`${s.Z.settings.ACCOUNTS_PINTEREST_URL}/v3/handshake/verify/`,"GET").then((e=>{if(e&&e.data)return u(e.data);throw new Error("No custom access token in cross domain verify response")})).catch((e=>{throw e}))},518122:(e,t,o)=>{o.d(t,{Ny:()=>g,ZP:()=>p,lp:()=>h,eD:()=>f});var n=o(186964),a=o(285230),s=o(58545),r=o(860952),i=o(724207),c=o(20814),l=o(632589),u=o(256191),_=o(69532),d=o(740049);const g=Object.freeze({SOFT_BANNED:0,RATE_LIMITED:1,LOGIN_ASSISTANCE:2,PASSWORD_RESET_SENT:3,PREVENT_FACEBOOK_REGISTER:4,PREVENT_GOOGLE_REGISTER:5,SUSPENDED:6});class m{static defaultLoginRedirectUrl(){return window.location.pathname===l.Z.settings.PASSWORD_RESET_URL||window.location.pathname===l.Z.settings.LOGIN_URL||window.location.pathname.startsWith(l.Z.settings.ADD_SECONDARY_ACCOUNT_PAGE)?"/":window.location.pathname+window.location.search}static defaultSocialLoginRedirectUrl(){return window.location.pathname.startsWith(l.Z.settings.ADD_SECONDARY_ACCOUNT_PAGE)?"/":window.location.pathname}static isExceedRecaptchaLocalLimit(){const e=c.ZP.localStorage.getItem("urh");if(e&&e.indexOf("|")>-1){const t=e.split("|");return 3===t.length&&(new Date).getTime()/1e3-parseInt(t[0],10)<=3600}return!1}static updateRecaptchaTimeStamp(){const e=c.ZP.localStorage.getItem("urh");let t=[];e&&(t=e.split("|"),3===t.length&&t.shift());const o=((new Date).getTime()/1e3).toString();t.push(o);const n=t.join("|");c.ZP.localStorage.setItem("urh",n)}static isFullyLoggedIn(e,t){return e&&1===t}static handleRedirect(e){if(!e){e="/";const t=(0,s.Z)();if(t){const o=t.next;o&&(e=o,delete t.next),e=(0,a.Z)(e,t)}}(0,r.Z)(e)}static handleRedirectWithFallbackWindowLocation(){this.handleRedirect(this.defaultLoginRedirectUrl())}static handleSignupRedirect(e,t){c.ZP.localStorage.setItem("signupTime",Date.now()),!t&&e&&"/"!==e?m.handleRedirect(e):m.handleRedirect("/")}static storeLoginCredentialsToBrowser(e){if(navigator.credentials&&e.username_or_email)try{const t=new window.PasswordCredential({id:e.username_or_email,password:e.password});navigator.credentials.store(t).then((()=>{(0,d.My)("navigatorCredentials.store.success")}))}catch(t){(0,d.My)("navigatorCredentials.store.error")}}static retrieveLoginCredentialsFromBrowser(){const e=window.navigator.credentials;if(!e)return new Promise(((e,t)=>{t()}));return e.get({password:!0,mediation:"silent"})}static attemptLoginWithBrowserCredentials(e,t,o){if(!e)return new Promise(((e,t)=>{t("No credentials")}));let n,a;e.password?(a="include",n=new FormData,n.append("username",e.id),n.append("password",e.password)):a=e;return fetch("/resource/UserSessionResource/create/",{method:"POST",body:n,credentials:a,headers:{Accept:"application/json, text/javascript, */*","X-CSRFToken":t||"","X-Pinterest-AppState":o,"X-Requested-With":"XMLHttpRequest"}}).then((e=>{if(200!==e.status){const t=new Error(e.statusText);throw t.response=e,t}return(0,d.My)("navigatorCredentials.login.success"),e.json()})).catch((e=>((0,d.My)("navigatorCredentials.login.failure"),Promise.reject(e))))}static fetchRecentlyLoggedOutUser(e){if(e)return Promise.reject();const t=i.ZP.create("UnauthUserDataResource");return new Promise(((e,o)=>{t.callGet().then((t=>{const a=t.resource_response.data,s=!!n.U2(u.x3);return a?(a.connected_to_facebook||a.connected_to_google||a.has_password||(0,d.My)("unauth.personalized_login.no_login_methods_found"),(0,d.My)("unauth.personalized_login.fetch_user_info.info.user_info_found.logged_out_cookie_"+(s?"true":"false")),e(a)):((0,d.My)("unauth.personalized_login.fetch_user_info.info.no_user_info.logged_out_cookie_"+(s?"true":"false")),o({}))})).catch((e=>{if(e.message){const t=e.message.replace(/\s/g,"_").toLowerCase();(0,d.My)(`unauth.personalized_login.fetch_user_info.error.${t}`)}else(0,d.My)("unauth.personalized_login.fetch_user_info.error.unknown");return o(e)}))}))}static handleLoginMfa(e,t,o){(0,d.My)("multi_step_login"),m.storeLoginCredentialsToBrowser(e),o?o(e,t):(0,d.My)("unauth.login.error.CLIENT_ERROR.null_mfa_handler")}}const p=m;function h(e){return e.facebook_id?_.sr.FACEBOOK:e.google_open_id_token?_.sr.GOOGLE_ONE_TAP:e.gplus_id_token?_.sr.GOOGLE:e.line_id_token?_.sr.LINE:e.username_or_email?_.sr.EMAIL:_.sr.OTHER}function f(e){return e.mfa_token?"mfa_token":e.mfa_resend?"mfa_resend":h(e)}},69532:(e,t,o)=>{o.d(t,{sr:()=>s,sR:()=>r,NN:()=>i,r4:()=>c,du:()=>l});var n=o(632589),a=o(524138);const s={FACEBOOK:"facebook",GOOGLE_ONE_TAP:"google_one_tap",GOOGLE:"google",LINE:"line",EMAIL:"email",OTHER:"other"},r=e=>e.facebook_id?s.FACEBOOK:e.google_open_id_token?s.GOOGLE_ONE_TAP:e.gplus_code||e.gplus_id_token?s.GOOGLE:e.line_id_token?s.LINE:e.email?s.EMAIL:s.OTHER,i=(e="")=>e in n.Z.settings.MINIMUM_AGE_BY_EU_COUNTRY,c=e=>n.Z.settings.EN_COUNTRIES_WITH_MANDATORY_AGE.includes(e)||n.Z.settings.LATAM_AGE_COLLECTION.has(e),l=e=>a.rT.includes(e)||a.ZR.has(e)||i(e)}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/10970-6999e0b6e27ac961.mjs.map