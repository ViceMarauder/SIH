(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[61230],{182666:e=>{e.exports="https://s.pinimg.com/webapp/btn_base-3772d107.png"},451874:(e,t,o)=>{o.d(t,{Z:()=>b});var n=o(667294),i=o(40142),s=o(943995),r=o(740049),a=o(112978),c=o(710159),l=o(977816),u=o(883119),d=o(785893);function h(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}const p={defaultButton:{display:"flex",alignItems:"center",backgroundColor:"#1877F2",border:"none",height:"40px",transition:"opacity .2s linear",width:"100%",minWidth:"240px",borderRadius:"20px",padding:"0px 0px 0px 8px"},roundedButton:{display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#FFF",border:"none",height:"48px",transition:"opacity .2s linear",width:"48px",marginBottom:"8px",borderRadius:"50%"},buttonText:{fontFamily:"Helvetica, Arial, sans-serif",fontWeight:"bold",color:"#fff",fontSize:"16px",paddingRight:"8px",letterSpacing:"0.25px"}};class g extends n.Component{constructor(...e){super(...e),h(this,"state",{fbReady:!1,showSocialAuthDisabledModal:!1}),h(this,"connectCallback",(({creds:e,data:t})=>{this.props.onFacebookConnectSuccess(e,t)})),h(this,"handleConnectClick",(()=>{(0,r.My)("unauth_mweb.facebook_connect.button_click");const{onTouch:e,mwebFacebookDisabled:t}=this.props;e&&e(),t?this.setState({showSocialAuthDisabledModal:!0}):this.state.fbReady&&(0,l.JF)().then(this.connectCallback,this.props.onFacebookConnectError)})),h(this,"renderRoundButton",(()=>(0,d.jsxs)(u.kC,{alignItems:"center",direction:"column",justifyContent:"start",children:[(0,d.jsx)("button",{onClick:this.handleConnectClick,style:p.roundedButton,type:"button",children:(0,d.jsx)(u.JO,{accessibilityLabel:this.props.i18n._("facebook","accessible label for facebook icon","accessible label for facebook icon"),color:"blue",icon:"facebook",inline:!0,size:20})}),(0,d.jsx)(u.xv,{color:"inverse",size:"md",children:this.props.i18n._("Facebook","Facebook company name","Facebook company name")})]})))}componentDidMount(){this.props.mwebFacebookDisabled||((0,l.we)(this.props.locale).then((()=>{this.setState({fbReady:!0})})),window.addEventListener("message",this.handleMessageEvent,!1))}handleMessageEvent(e){(0,l.s0)(e,(e=>(0,r.My)(`unauth_mweb.${e}`)))}componentWillUnmount(){window.removeEventListener("message",this.handleMessageEvent)}renderPersonalizedButton(){const{isRerequest:e}=this.props,t=`${this.props.type||"continue"}_with`,o="rounded",n=this.props.fbUseContinueAs?"true":"false";return(0,d.jsxs)(u.xu,{bottom:!0,left:!0,right:!0,top:!0,dangerouslySetInlineStyle:{__style:{pointerEvents:"none"}},position:"absolute",rounding:5,children:[e?(0,d.jsx)("div",{className:"fb-login-button","data-width":"100%","data-max-rows":"1","data-size":"large","data-button-type":t,"data-layout":o,"data-show-faces":"false","data-auth-type":"rerequest","data-scope":l.$.join(","),"data-auto-logout-link":"false","data-use-continue-as":n}):(0,d.jsx)("div",{className:"fb-login-button","data-width":"100%","data-max-rows":"1","data-size":"large","data-button-type":t,"data-layout":o,"data-show-faces":"false","data-scope":l.$.join(","),"data-auto-logout-link":"false","data-use-continue-as":n}),this.state.showSocialAuthDisabledModal&&(0,d.jsx)(s.Z,{type:"facebook",onDismiss:()=>this.setState({showSocialAuthDisabledModal:!1})})]})}render(){const{isRounded:e}=this.props;return e?this.renderRoundButton():(0,d.jsxs)(u.xu,{position:"relative","data-test-id":"FacebookConnectContainer",children:[this.renderPersonalizedButton(),(0,d.jsxs)("button",{onClick:this.handleConnectClick,style:p.defaultButton,type:"button","data-test-id":"FacebookConnectButton",children:[(0,d.jsx)(u.xu,{color:"white",rounding:3,dangerouslySetInlineStyle:{__style:{paddingTop:"5px",paddingLeft:"3px",paddingRight:"2px",marginLeft:"4px",marginRight:"4.4px"}},children:(0,d.jsx)(u.JO,{accessibilityLabel:this.props.i18n._("facebook","accessible label for facebook icon","accessible label for facebook icon"),color:"blue",icon:"facebook",inline:!0,size:19})}),(0,d.jsx)(u.xu,{alignItems:"center",display:"flex",justifyContent:"center",flex:"grow",marginEnd:1,children:(0,d.jsx)("span",{style:p.buttonText,children:this.props.buttonText})})]}),this.state.showSocialAuthDisabledModal&&(0,d.jsx)(s.Z,{type:"facebook",onDismiss:()=>this.setState({showSocialAuthDisabledModal:!1})})]})}}function b(e){const t=(0,c.ZP)(),{locale:o}=(0,i.useSelector)((e=>e.session)),{anyEnabled:n}=(0,a.aq)("mweb_facebook_disabled");return(0,d.jsx)(g,{...e,i18n:t,locale:o,mwebFacebookDisabled:n})}},561230:(e,t,o)=>{o.d(t,{Z:()=>$});var n=o(667294),i=o(40142),s=o(451874),r=o(938913),a=o(475439),c=o(899695),l=o(143010),u=o(958140),d=o(182666),h=o.n(d),p=o(632589),g=o(914861),b=o(710159),m=o(498177),x=o(740049),f=o(112978),_=o(952733),w=o(198873),y=o(883119),k=o(785893);const L={defaultButton:{display:"flex",alignItems:"center",backgroundColor:"#00C300",border:"none",height:"40px",transition:"opacity .2s linear",width:"100%",borderRadius:"20px",padding:"0px 0px 0px 8px"},lineLogo:{borderRadius:"12px",backgroundColor:"#00C300",width:"32px",height:"32px"},buttonText:{fontWeight:"bold",color:"#fff",fontSize:"16px",paddingRight:"33px"}},C=({buttonText:e,onLineConnectSuccess:t,onLineConnectError:o,onTouch:n})=>{const i=(0,b.ZP)(),{anyEnabled:s}=(0,f.tc)("mweb_line_oauth_jp")(),{anyEnabled:r}=(0,f.tc)("mweb_line_oauth_jp_android")(),a=s||r,c=(0,u.Z)(10),{locale:d}=(0,_.B)();let C;const T=e=>{const n=(0,m.mB)(e);if(n.state&&n.code&&n.state===c){C&&!C.closed&&C.close();const e=`${window.location.origin}/oauth/line/redirect`;(0,l.Z)({url:"/oauth/line/verify",type:"POST",data:{code:n.code,redirect_uri:e}}).promise.then((({ok:e,responseText:n})=>{if(e&&n){const e=JSON.parse(n),{id_token:o,access_token:i}=e;o&&i&&t({line_id_token:o,line_access_token:i},{line_id_token:o,line_access_token:i})}else o()}))}},E=e=>{e.isTrusted&&e.origin===window.location.origin&&e.data&&T(String(e.data))},S=e=>{if(e.isTrusted&&e.url.startsWith(window.location.origin)&&"lineOAuthOneTimeCode"===e.key){const e=(0,w.qn)("lineOAuthOneTimeCode");e&&T(e)}};(0,g.Z)((()=>()=>{window.removeEventListener("message",E),window.removeEventListener("storage",S),(0,w.L_)("lineOAuthOneTimeCode"),C&&!C.closed&&C.close()}));const j=L.defaultButton;return a?(0,k.jsx)(y.xu,{position:"relative","data-test-id":"LineConnectContainer",children:(0,k.jsxs)("button",{onClick:()=>{(0,x.My)("unauth_mweb.line_connect.button_click"),n&&n();const e=`${window.location.origin}/oauth/line/redirect`;window.addEventListener("message",E,!1),window.addEventListener("storage",S),C=window.open(`https://access.line.me/oauth2/v2.1/authorize?response_type=code&client_id=${p.Z.settings.LINE_CLIENT_ID}&redirect_uri=${encodeURIComponent(e)}&state=${c}&ui_locales=${d}&scope=profile%20openid%20email`,"_blank")},style:j,type:"button","data-test-id":"LineConnectButton",children:[(0,k.jsx)("img",{style:L.lineLogo,src:h(),alt:i._("line","accessible label for line icon","accessible label for line icon")}),(0,k.jsx)(y.kC,{alignItems:"center",justifyContent:"center",flex:"grow",children:(0,k.jsx)("span",{style:L.buttonText,children:e})})]})}):null};var T=o(647136),E=o(371974),S=o(593720),j=o(977816),v=o(708206),B=o(781228),A=o(10970),F=o(498444),R=o(69532),P=o(476891),D=o(484951),Z=o(524138),O=o(735767),I=o(638137),M=o(477783),N=o(358142),z=o(855168);function U(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class H extends n.PureComponent{constructor(...e){super(...e),U(this,"state",{isLoading:!1,showRegisterLoading:!1,signupPlatform:"default"}),U(this,"onRegisterSuccess",(e=>{const{next:t}=this.props;this.trackSignupLoginEvent(7487,e),["facebook","google"].includes(e)&&(t&&this.props.history.push(t),this.props.history.push("/")),this.setState({showRegisterLoading:!1})})),U(this,"onRegisterFailure",((e,t)=>{this.trackSignupLoginEvent(7488,t),this.props.showToast((({onHide:t})=>(0,k.jsx)(T.ZP,{text:e.message||this.props.i18n._("Sorry! Something went wrong on our end.","Error logging on","Error logging on"),onHide:t}))),this.setState({isLoading:!1,showRegisterLoading:!1})})),U(this,"handlePostLoginRegistration",((e,t)=>{const{beforeRegister:o,isSignupConfirmationExpEnabled:n}=this.props;o&&n().anyEnabled?o(e,t):t()})),U(this,"onLoginError",((e,t,o,n)=>{this.setState({isLoading:!1}),!t||t.apiErrorCode!==O.xN&&t.apiErrorCode!==O.lg&&t.apiErrorCode!==O.Pv?t?((0,x.My)(`mweb_login_button_skip_register.api_error_code.${t.apiErrorCode}`),this.props.showToast((({onHide:e})=>(0,k.jsx)(T.ZP,{text:t.apiErrorCode&&t.message?t.message:this.props.i18n._("Sorry, we can't log you in.","Error message when user having trouble login in.","Error message when user having trouble login in."),onHide:e})))):((0,x.My)("unauth_mweb.login.unexpected_error"),this.props.showToast((({onHide:e})=>(0,k.jsx)(T.ZP,{text:this.props.i18n._("Sorry, we can't log you in.","Error message when user having trouble login in.","Error message when user having trouble login in."),onHide:e})))):"line"===n||o.email||o.gplus_id_token?"line"===n?t.apiErrorCode===O.Pv?this.redirectToLineEmailCollect(o):this.registerAfterLoginError(e,t,o,n):this.handlePostLoginRegistration(o.email||"",(()=>this.registerAfterLoginError(e,t,o,n))):(0,j.uP)("email").then((({hasPerm:i})=>{this.handlePostLoginRegistration("",(()=>this.redirectToEmailCollect(o,e,t,n))),(0,x.My)(`unauth_mweb.reg_via_fb.has_email_perm.${String(!!i)}`)})).catch((i=>{this.handlePostLoginRegistration("",(()=>this.registerAfterLoginError(e,t,o,n)))}))})),U(this,"getAuxDataSignupLoginMethod",(e=>{switch(e){case"facebook":return 2;case"google":return 3;case"line":return 8;default:return}})),U(this,"getViewParameterType",(e=>{switch(e){case"facebook":return 3205;case"google":return 3204;case"line":return 3556;default:return}})),U(this,"trackSignupLoginEvent",((e,t)=>{const{isAuthenticated:o,isLimitedLoginUser:n}=this.props;(0,M.j)({event_type:e,view_type:10,view_parameter:this.getViewParameterType(t),aux_data:{...o?{login_state:n?2:1}:{},signup_login_method:this.getAuxDataSignupLoginMethod(t)}})})),U(this,"trackButtonTap",(e=>{const{isAuthenticated:t,isLimitedLoginUser:o,viewParameter:n}=this.props;(0,M.So)({view_type:10,view_parameter:n,element:e,aux_data:{...t?{login_state:o?2:1}:{}}})})),U(this,"registerAfterLoginError",((e,t,o,n)=>{const{activateMobileObligatoryAgeExp:i,flushExp:s}=this.props;this.includeAgeStep(n,o)&&("line"!==n||i().anyEnabled)?(s(),this.props.history.push({pathname:"/signup/thirdpartyage/",state:{signupOptions:o,signupPlatform:n}})):("facebook"===n&&o.birthday&&(o.birthday=String((0,I.r)(o.birthday||""))),this.setState({isLoading:!0,showRegisterLoading:!0,signupPlatform:n}),this.trackSignupLoginEvent(7537,n),this.props.register(o).then((e=>this.onRegisterSuccess(n)),(e=>this.onRegisterFailure(e,n))))})),U(this,"redirectToEmailCollect",((e,t,o,n)=>{const{country:i}=this.props;this.props.history.push({pathname:"/signup/fbemailcollect/",state:{signupOptions:e,isGDPREUCountry:(0,R.NN)(i),country:i,includeAgeStep:this.includeAgeStep("facebook",e)}})})),U(this,"redirectToLineEmailCollect",(e=>{this.props.history.push({pathname:"/signup/line-email-collect/",state:{signupOptions:e}})})),U(this,"includeAgeStep",((e,t)=>{const{country:o,activateMobileObligatoryAgeExp:n,deviceType:i,flushExp:s}=this.props,r="facebook"!==e||!t.birthday,a=(0,R.NN)(o),c=Z.rT.includes(o),l=Z.ZR.has(o),u=a||c||l||"desktop"!==i&&n().anyEnabled;return s(),u&&(r||!(0,I.h)(t.birthday||"",18))})),U(this,"handleFacebookError",(()=>{const{fbConnectHandler:e}=this.props;e&&e("error"),this.props.showToast((({onHide:e})=>(0,k.jsx)(T.ZP,{text:this.props.i18n._("Unable to connect to Facebook","Error logging on with Facebook","Error logging on with Facebook"),onHide:e})))})),U(this,"handleLineError",(()=>{this.props.showToast((({onHide:e})=>(0,k.jsx)(T.ZP,{text:this.props.i18n._("Unable to connect to Line","Error logging on with Line","Error logging on with Line"),onHide:e})))})),U(this,"handleSignupTouch",(({event:e})=>{const{from:t,history:o,isBusiness:n,next:i,onSignupTouch:s,setLoginSignupFrom:r,location:a,isRedirectToNextParamAfterSignup:c}=this.props;e&&(e.stopPropagation(),e.preventDefault()),(0,x.NC)("press_email_signup"),(0,x.LW)({action:"click",page_location:a,item:"continue-email-button"}),s&&s(),t&&r(t),this.trackButtonTap(31),o.push({pathname:n?"/business/signup/step1/":"/signup/step1/",search:a.search,state:{next:i,isRedirectToNextParamAfterSignup:c}})})),U(this,"handleLoginTouch",(({event:e})=>{const{isBusiness:t,footerCTA:o,from:n,history:i,next:s,onLoginTouch:r,location:a,isRedirectToNextParamAfterSignup:c}=this.props;e.stopPropagation(),e.preventDefault(),r&&r(),n&&this.props.setLoginSignupFrom(n),(0,x.LW)({action:"click",page_location:a,item:"login-button"}),this.trackButtonTap(30);const l=o||"button";(0,x.My)(`unauth_mweb.login_buttons.footer.${l}`),(0,x.NC)("press_login"),i.push({pathname:t?"/business/login/":"/login/",search:a.search,state:{next:s,isRedirectToNextParamAfterSignup:c}})})),U(this,"handleGoogleTouch",(()=>{const{onGoogleTouch:e,location:t}=this.props;e&&e(),(0,x.LW)({action:"click",page_location:t,item:"continue-google-button"}),this.trackButtonTap(208)})),U(this,"handleFacebookTouch",(()=>{const{onFacebookTouch:e,location:t}=this.props;e&&e(),(0,x.LW)({action:"click",page_location:t,item:"continue-facebook-button"}),this.trackButtonTap(68)})),U(this,"handleLineTouch",(()=>{this.trackButtonTap(12277),(0,x.LW)({action:"click",page_location:this.props.location,item:"continue-line-button"})})),U(this,"login",(e=>(t,o)=>{const{fbConnectHandler:n,history:i,login:s,next:r,location:a,noImmediateRedirect:c}=this.props,l="google"===e?"gsi_btn":"other",u=a.state&&a.state.switch_account?{switchAccount:!0,trigger:l}:{noImmediateRedirect:c,trigger:l};"facebook"===e&&n&&n("success"),(0,x.NC)(e+"_login_success"),this.trackSignupLoginEvent(7534,e),s(t,i,r,u).then((()=>{this.trackSignupLoginEvent(7536,e)})).catch((n=>{this.trackSignupLoginEvent(7535,e),this.onLoginError(t,n,o,e)})),this.setState({isLoading:!0,showRegisterLoading:!1,signupPlatform:e})})),U(this,"renderRegularButtons",(()=>{const{isBusiness:e,locale:t,googleText:o,facebookText:i,lineText:r,showEmailButton:c,fbButtonType:l,isRerequest:u,isAuthenticated:d,showEmailButtonAsSecondary:h,showSecondGoogleButton:p}=this.props;let g=this.props.i18n._("Continue with email","Sign up button","Sign up button"),b=2;return e&&(g=this.props.i18n._("Create account","Button text for creating a business account","Button text for creating a business account"),b=-2),(0,k.jsxs)(n.Fragment,{children:[c&&(0,k.jsx)(y.xu,{"data-test-id":"continue-email-button",marginBottom:b,children:(0,k.jsx)(y.zx,{fullWidth:!0,color:h?"gray":"red",text:g,onClick:this.handleSignupTouch})}),i&&(0,k.jsx)(y.xu,{marginBottom:2,"data-test-id":"continue-facebook-button",children:(0,k.jsx)(s.Z,{buttonText:i,locale:t,onFacebookConnectError:this.handleFacebookError,onFacebookConnectSuccess:this.login("facebook"),type:l,fbUseContinueAs:this.props.fbUseContinueAs,onTouch:this.handleFacebookTouch,isRerequest:u})}),o&&(0,k.jsx)(y.xu,{marginBottom:2,"data-test-id":"continue-google-button",children:(0,k.jsx)(a.Z,{buttonText:o,isAuthenticated:d,showSecondGoogleButton:p,onGoogleConnectSuccess:this.login("google"),onTouch:this.handleGoogleTouch})}),r&&(0,k.jsx)(y.xu,{marginBottom:2,"data-test-id":"continue-line-button",children:(0,k.jsx)(C,{buttonText:r,onLineConnectError:this.handleLineError,onLineConnectSuccess:this.login("line"),onTouch:this.handleLineTouch})})]})}))}renderFooterCTA(){const{footerCTA:e,increasedSpaceBelow:t,isMobileHomepage:o,removeLoginContainerPaddingY:n,textIsDark:i}=this.props;return"member_link"===e?(0,k.jsx)(y.xu,{marginTop:-4,"data-test-id":"login-member",children:(0,k.jsx)(c.Z,{pressState:"none",onTouch:e=>this.handleLoginTouch({event:e}),children:(0,k.jsx)(y.xu,{paddingY:n?0:4,marginBottom:t?-1:-2,children:(0,k.jsx)(y.xv,{align:"center",size:"md",weight:"bold",color:o&&!i?"white":"darkGray",children:this.props.i18n._("Already a member? Log in","Link on mobile web sign up modal to direct unauth users to the login page","Link on mobile web sign up modal to direct unauth users to the login page")})})})}):"not_you_link"===e?(0,k.jsx)(y.xu,{marginTop:-3,"data-test-id":"LoginButtonsNotYoucontainer",children:(0,k.jsx)(c.Z,{pressState:"none",onTouch:e=>this.handleLoginTouch({event:e}),children:(0,k.jsxs)(y.xv,{size:"md",inline:!0,color:"default",children:[this.props.i18n._("Not you? ","Text for if the user is shown the wrong Facebook profile image for their account","Text for if the user is shown the wrong Facebook profile image for their account"),(0,k.jsx)(y.xv,{color:"default",inline:!0,size:"md",weight:"bold",children:this.props.i18n._("Log in as a different user.","Clickable text that takes the user to the login page","Clickable text that takes the user to the login page")})]})})}):(0,k.jsx)(y.xu,{marginBottom:5,"data-test-id":"login-button",children:(0,k.jsx)(y.zx,{fullWidth:!0,color:"transparent",onClick:this.handleLoginTouch,text:this.props.i18n._("Log in","Login page button","Login page button")})})}renderRoundedButtons(){const{locale:e,fbButtonType:t,isRerequest:o}=this.props;return(0,k.jsxs)(y.kC,{alignItems:"center",direction:"column",justifyContent:"start",children:[(0,k.jsx)(y.xu,{marginBottom:4,children:(0,k.jsx)(y.xv,{align:"center",color:"inverse",size:"md",children:this.props.i18n._("Sign up to get started","Sign up CTA","Sign up CTA")})}),(0,k.jsxs)(y.kC,{alignItems:"stretch",justifyContent:"start",direction:"row",children:[(0,k.jsxs)(y.xu,{"data-test-id":"signup-button",rounding:"circle",display:"flex",direction:"column",alignItems:"center",marginBottom:4,marginEnd:4,children:[(0,k.jsx)("button",{onClick:this.handleSignupTouch,style:{border:"none",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#FFF",height:"48px",width:"48px",marginBottom:"8px",borderRadius:"50%",cursor:"pointer"},type:"button",children:(0,k.jsx)(y.JO,{accessibilityLabel:this.props.i18n._("Continue with email","Sign up with email button","Sign up with email button"),icon:"gmail",color:"darkGray",inline:!0,size:16})}),(0,k.jsx)(y.xv,{color:"inverse",size:"md",children:this.props.i18n._("Email","Icon text for continuing with email","Icon text for continuing with email")})]}),(0,k.jsx)(y.xu,{marginEnd:4,children:(0,k.jsx)(s.Z,{locale:e,onFacebookConnectError:this.handleFacebookError,onFacebookConnectSuccess:this.login("facebook"),type:t,fbUseContinueAs:this.props.fbUseContinueAs,onTouch:this.handleFacebookTouch,isRerequest:o,isRounded:!0})}),(0,k.jsx)(a.Z,{onGoogleConnectSuccess:this.login("google"),onTouch:this.handleGoogleTouch,isRounded:!0})]})]})}render(){const{isBusiness:e,showTextDivider:t,roundButtons:o,showLoginButtons:n,secondaryAccountFlowEnabled:i}=this.props,{showRegisterLoading:s,isLoading:a,signupPlatform:c}=this.state,l=e?i?6:-5:0;return(0,k.jsxs)(y.xu,{marginTop:l,maxWidth:400,marginStart:"auto",marginEnd:"auto","data-test-id":"LoginButtonsContainer",children:[t&&(0,k.jsx)(y.xu,{marginBottom:3,marginTop:3,children:(0,k.jsx)(y.xv,{align:"center",size:"sm",weight:"bold",children:this.props.i18n._("OR","Separator for email login button and social login button","Separator for email login button and social login button")})}),(0,k.jsx)(y.xu,{marginBottom:6,children:o?this.renderRoundedButtons():this.renderRegularButtons()}),n&&this.renderFooterCTA(),a&&(s?(0,k.jsx)(S.Z,{platform:"line"===c?"default":c}):(0,k.jsx)(r.Z,{}))]})}}U(H,"defaultProps",{next:"/",fbUseContinueAs:!0,footerCTA:"button"});const $=(0,v.compose)(z.EN,(0,i.connect)((({session:e,users:t={}},o)=>({country:e.country,locale:e.locale,isAuthenticated:e.isAuthenticated,isLimitedLoginUser:(0,B.xT)(t[e.userId]),isTablet:e.isTablet})),(()=>({}))))((function(e){const t=(0,b.ZP)(),{showToast:o}=(0,N.F9)(),s=(0,i.useDispatch)(),{showEmailButton:r,showLoginButtons:a}=e,c=(0,D.U)(),l=(0,f.tc)("mweb_unauth_signup_confirmation"),{experiments:u}=(0,_.B)(),d=(0,E.ZP)(),h=(0,f.tc)("mweb_unauth_signup_obligatory_age");return(0,n.useEffect)((()=>{c&&(a&&c.load(new URL("login.js","file://")),r&&c.load(new URL("signup.js","file://")))}),[]),(0,k.jsx)(H,{...e,i18n:t,isSignupConfirmationExpEnabled:l,login:(e,t,o,n)=>s((0,A.x4)(e,t,o,n)),register:e=>s((0,F.z)(e)),setLoginSignupFrom:e=>s((0,P.rm)(e)),showToast:o,activateMobileObligatoryAgeExp:h,deviceType:d,flushExp:()=>u.flush()})}))},977816:(e,t,o)=>{o.d(t,{GH:()=>r,$:()=>c,sl:()=>l,we:()=>u,Jb:()=>d,a7:()=>h,s0:()=>p,JF:()=>g,uP:()=>b});var n=o(578810),i=o(740049),s=o(720251);const r="274266067164",a=["picture.type(large)","id","first_name","last_name","email","gender","birthday"],c=["public_profile","email","user_birthday","user_friends"],l=e=>{e&&(0,i.dy)({event:"load_script_success",provider:"facebook"}),"undefined"!=typeof window&&window.FB?(e&&(0,i.dy)({event:"initialize_library",provider:"facebook"}),window.FB.init({appId:r,status:!0,xfbml:!0,version:"v2.7"})):e&&(0,i.dy)({event:"global_object_not_found",provider:"facebook"})},u=(e,t)=>{t&&(0,i.dy)({event:"load_script_start",provider:"facebook"});return(0,s.c5)((0,n.Z)(e),s.Jg.FACEBOOK).then((()=>l(t)))},d=()=>new Promise((e=>{"undefined"!=typeof window&&window.FB&&window.FB.getLoginStatus(e)})),h=(e,t={},o)=>new Promise(((n,i)=>{if("connected"===e.status){o&&o("success");const{authResponse:{userID:i,accessToken:s}}=e,r={facebook_id:i,facebook_token:s,facebook_autologin:t.autologin||!1},c=`/me?fields=${a.join(",")}`;window.FB.api(c,(e=>{n({creds:r,data:{...e,...r,...e.picture&&!e.picture.data.is_silhouette?{image_url:e.picture.data.url}:{}}})}))}else{const t=e.status||"unknown";o&&o(`failure.${t}`),i({status:t})}})),p=(e,t)=>{const o=e.data;e.isTrusted&&"string"==typeof o&&0===o.indexOf("_FB_")&&-1!==o.indexOf("type=login_button_dialog_open")&&t&&t("facebook_connect.login_button_dialog_open")},g=()=>new Promise((e=>{window.FB.login(e,{scope:c.join(",")})})).then(h),b=e=>new Promise(((t,o)=>{window.FB.api("/me/permissions",(n=>{const i=n.data;if(i){const o=i.find((t=>t.permission===e&&"granted"===t.status));return t({hasPerm:!!o})}return o(Error("Failed to call facebook to get permission"))}))}))},578810:(e,t,o)=>{o.d(t,{Z:()=>n});const n=e=>`//connect.facebook.net/${(e=>{const t=e.replace(/-/g,"_");if(t.startsWith("es"))return"es_LA";if(t.startsWith("ar"))return"ar_AR";switch(t){case"de":return"de_DE";case"fr":return"fr_FR";case"it":return"it_IT";case"ja":return"ja_JP";case"nl":return"nl_NL";case"tr":return"tr_TR";case"en_AU":return"en_US";default:return t}})(e)}/sdk.js`},958140:(e,t,o)=>{function n(e=5){const t="abcdefghijklmnopqrstuvwxyz1234567890";return new Array(e).fill("").map((()=>t[Math.floor(Math.random()*t.length)])).join("")}o.d(t,{Z:()=>n})}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/61230-24d615faa23f87c8.mjs.map